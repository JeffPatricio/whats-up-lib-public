!function(){"use strict";function e(i,e){return e.forEach(function(n){n&&"string"!=typeof n&&!Array.isArray(n)&&Object.keys(n).forEach(function(e){var t;"default"===e||e in i||(t=Object.getOwnPropertyDescriptor(n,e),Object.defineProperty(i,e,t.get?t:{enumerable:!0,get:function(){return n[e]}}))})}),Object.freeze(i)}function d(n,i){try{const a=n.split(",");let e=a[0].match(/(?:data:)?(.*?)(?:;base64)?$/i)[1];e=e.split(/\s+;\s+/).join("; ");const o=window.Base64?window.Base64.atob(a[1]):atob(a[1]);let t=o.length;const r=new Uint8Array(t);for(;t--;)r[t]=o.charCodeAt(t);return new File([r],i,{type:e})}catch{return!1}}(function(e){function t(r,e,t){var s,d,c,u,l,w,f=0,g=[],p=0,h=!1,a=[],o=[],A=!1,m=!1,P=-1,n=(t=t||{}).encoding||"UTF8";if((w=t.numRounds||1)!==parseInt(w,10)||w<1)throw Error("numRounds must a integer >= 1");if("SHA-1"===r)u=512,y=G,l=te,c=160,b=function(e){return e.slice()};else if(0===r.lastIndexOf("SHA-",0))if(y=function(e,t){return H(e,t,r)},l=function(e,t,n,i){var a,o;if("SHA-224"===r||"SHA-256"===r)a=15+(t+65>>>9<<4),o=16;else{if("SHA-384"!==r&&"SHA-512"!==r)throw Error("Unexpected error in SHA-2 implementation");a=31+(t+129>>>10<<5),o=32}for(;e.length<=a;)e.push(0);for(e[t>>>5]|=128<<24-t%32,e[a]=4294967295&(t+=n),e[a-1]=t/4294967296|0,n=e.length,t=0;t<n;t+=o)i=H(e.slice(t,t+o),i,r);if("SHA-224"===r)e=[i[0],i[1],i[2],i[3],i[4],i[5],i[6]];else if("SHA-256"===r)e=i;else if("SHA-384"===r)e=[i[0].a,i[0].b,i[1].a,i[1].b,i[2].a,i[2].b,i[3].a,i[3].b,i[4].a,i[4].b,i[5].a,i[5].b];else{if("SHA-512"!==r)throw Error("Unexpected error in SHA-2 implementation");e=[i[0].a,i[0].b,i[1].a,i[1].b,i[2].a,i[2].b,i[3].a,i[3].b,i[4].a,i[4].b,i[5].a,i[5].b,i[6].a,i[6].b,i[7].a,i[7].b]}return e},b=function(e){return e.slice()},"SHA-224"===r)u=512,c=224;else if("SHA-256"===r)u=512,c=256;else if("SHA-384"===r)u=1024,c=384;else{if("SHA-512"!==r)throw Error("Chosen SHA variant is not supported");u=1024,c=512}else{if(0!==r.lastIndexOf("SHA3-",0)&&0!==r.lastIndexOf("SHAKE",0))throw Error("Chosen SHA variant is not supported");var I=6,y=K,b=function(e){for(var t=[],n=0;n<5;n+=1)t[n]=e[n].slice();return t},P=1;if("SHA3-224"===r)u=1152,c=224;else if("SHA3-256"===r)u=1088,c=256;else if("SHA3-384"===r)u=832,c=384;else if("SHA3-512"===r)u=576,c=512;else if("SHAKE128"===r)u=1344,c=-1,I=31,m=!0;else{if("SHAKE256"!==r)throw Error("Chosen SHA variant is not supported");u=1088,c=-1,I=31,m=!0}l=function(e,t,n,i,a){for(var o=I,r=[],s=(n=u)>>>5,d=0,c=t>>>5,l=0;l<c&&n<=t;l+=s)i=K(e.slice(l,l+s),i),t-=n;for(e=e.slice(l),t%=n;e.length<s;)e.push(0);for(e[(l=t>>>3)>>2]^=o<<l%4*8,e[s-1]^=2147483648,i=K(e,i);32*r.length<a&&(e=i[d%5][d/5|0],r.push(e.b),!(32*r.length>=a));)r.push(e.a),0==64*(d+=1)%n&&K(null,i);return r}}d=T(e,n,P),s=D(r),this.setHMACKey=function(e,t,n){var i;if(!0===h)throw Error("HMAC key already set");if(!0===A)throw Error("Cannot set HMAC key after calling update");if(!0===m)throw Error("SHAKE is not supported for HMAC");if(e=(t=T(t,(n||{}).encoding||"UTF8",P)(e)).binLen,t=t.value,n=(i=u>>>3)/4-1,i<e/8){for(t=l(t,e,0,D(r),c);t.length<=n;)t.push(0);t[n]&=4294967040}else if(e/8<i){for(;t.length<=n;)t.push(0);t[n]&=4294967040}for(e=0;e<=n;e+=1)a[e]=909522486^t[e],o[e]=1549556828^t[e];s=y(a,s),f=u,h=!0},this.update=function(e){var t,n,i=0,a=u>>>5,o=d(e,g,p);for(e=o.binLen,t=o.value,o=e>>>5,n=0;n<o;n+=a)i+u<=e&&(s=y(t.slice(n,n+a),s),i+=u);f+=i,g=t.slice(i>>>5),p=e%u,A=!0},this.getHash=function(e,t){var n,i,a,o;if(!0===h)throw Error("Cannot call getHash after setting HMAC key");if(a=E(t),!0===m){if(-1===a.shakeLen)throw Error("shakeLen must be specified in options");c=a.shakeLen}switch(e){case"HEX":n=function(e){return W(e,c,P,a)};break;case"B64":n=function(e){return S(e,c,P,a)};break;case"BYTES":n=function(e){return v(e,c,P)};break;case"ARRAYBUFFER":try{i=new ArrayBuffer(0)}catch(e){throw Error("ARRAYBUFFER not supported by this environment")}n=function(e){return M(e,c,P)};break;case"UINT8ARRAY":try{i=new Uint8Array(0)}catch(e){throw Error("UINT8ARRAY not supported by this environment")}n=function(e){return _(e,c,P)};break;default:throw Error("format must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}for(o=l(g.slice(),p,f,b(s),c),i=1;i<w;i+=1)!0===m&&0!=c%32&&(o[o.length-1]&=16777215>>>24-c%32),o=l(o,c,0,D(r),c);return n(o)},this.getHMAC=function(e,t){var n,i;if(!1===h)throw Error("Cannot call getHMAC without first setting HMAC key");switch(i=E(t),e){case"HEX":n=function(e){return W(e,c,P,i)};break;case"B64":n=function(e){return S(e,c,P,i)};break;case"BYTES":n=function(e){return v(e,c,P)};break;case"ARRAYBUFFER":try{n=new ArrayBuffer(0)}catch(e){throw Error("ARRAYBUFFER not supported by this environment")}n=function(e){return M(e,c,P)};break;case"UINT8ARRAY":try{n=new Uint8Array(0)}catch(e){throw Error("UINT8ARRAY not supported by this environment")}n=function(e){return _(e,c,P)};break;default:throw Error("outputFormat must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}return t=l(g.slice(),p,f,b(s),c),e=y(o,D(r)),n(l(t,c,u,e,c))}}function C(e,t){this.a=e,this.b=t}function i(e,t,n,i){var a,o,r,s,d;for(t=t||[0],o=(n=n||0)>>>3,d=-1===i?3:0,a=0;a<e.length;a+=1)t.length<=(r=(s=a+o)>>>2)&&t.push(0),t[r]|=e[a]<<8*(d+s%4*i);return{value:t,binLen:8*e.length+n}}function W(e,t,n,i){var a,o,r,s="";for(t/=8,r=-1===n?3:0,a=0;a<t;a+=1)o=e[a>>>2]>>>8*(r+a%4*n),s+="0123456789abcdef".charAt(o>>>4&15)+"0123456789abcdef".charAt(15&o);return i.outputUpper?s.toUpperCase():s}function S(e,t,n,i){for(var a,o,r="",s=t/8,d=-1===n?3:0,c=0;c<s;c+=3)for(a=c+1<s?e[c+1>>>2]:0,o=c+2<s?e[c+2>>>2]:0,o=(e[c>>>2]>>>8*(d+c%4*n)&255)<<16|(a>>>8*(d+(c+1)%4*n)&255)<<8|o>>>8*(d+(c+2)%4*n)&255,a=0;a<4;a+=1)r+=8*c+6*a<=t?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(o>>>6*(3-a)&63):i.b64Pad;return r}function v(e,t,n){var i,a,o,r="";for(t/=8,o=-1===n?3:0,i=0;i<t;i+=1)a=e[i>>>2]>>>8*(o+i%4*n)&255,r+=String.fromCharCode(a);return r}function M(e,t,n){t/=8;for(var i=new ArrayBuffer(t),a=new Uint8Array(i),o=-1===n?3:0,r=0;r<t;r+=1)a[r]=e[r>>>2]>>>8*(o+r%4*n)&255;return i}function _(e,t,n){t/=8;for(var i=new Uint8Array(t),a=-1===n?3:0,o=0;o<t;o+=1)i[o]=e[o>>>2]>>>8*(a+o%4*n)&255;return i}function E(e){var t={outputUpper:!1,b64Pad:"=",shakeLen:-1};if(t.outputUpper=(e=e||{}).outputUpper||!1,!0===e.hasOwnProperty("b64Pad")&&(t.b64Pad=e.b64Pad),!0===e.hasOwnProperty("shakeLen")){if(0!=e.shakeLen%8)throw Error("shakeLen must be a multiple of 8");t.shakeLen=e.shakeLen}if("boolean"!=typeof t.outputUpper)throw Error("Invalid outputUpper formatting option");if("string"!=typeof t.b64Pad)throw Error("Invalid b64Pad formatting option");return t}function T(e,w,f){switch(w){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(e){case"HEX":e=function(e,t,n){var i,a,o,r,s,d,c=e.length;if(0!=c%2)throw Error("String of HEX type must be in byte increments");for(t=t||[0],s=(n=n||0)>>>3,d=-1===f?3:0,i=0;i<c;i+=2){if(a=parseInt(e.substr(i,2),16),isNaN(a))throw Error("String of HEX type contains invalid characters");for(o=(r=(i>>>1)+s)>>>2;t.length<=o;)t.push(0);t[o]|=a<<8*(d+r%4*f)}return{value:t,binLen:4*c+n}};break;case"TEXT":e=function(e,t,n){var i,a,o,r,s,d,c,l,u=0;if(t=t||[0],s=(n=n||0)>>>3,"UTF8"===w)for(l=-1===f?3:0,o=0;o<e.length;o+=1)for(a=[],(i=e.charCodeAt(o))<128?a.push(i):i<2048?(a.push(192|i>>>6),a.push(128|63&i)):i<55296||57344<=i?a.push(224|i>>>12,128|i>>>6&63,128|63&i):(i=65536+((1023&i)<<10|1023&e.charCodeAt(o+=1)),a.push(240|i>>>18,128|i>>>12&63,128|i>>>6&63,128|63&i)),r=0;r<a.length;r+=1){for(d=(c=u+s)>>>2;t.length<=d;)t.push(0);t[d]|=a[r]<<8*(l+c%4*f),u+=1}else if("UTF16BE"===w||"UTF16LE"===w)for(l=-1===f?2:0,a="UTF16LE"===w&&1!==f||"UTF16LE"!==w&&1===f,o=0;o<e.length;o+=1){for(i=e.charCodeAt(o),!0===a&&(i=(r=255&i)<<8|i>>>8),d=(c=u+s)>>>2;t.length<=d;)t.push(0);t[d]|=i<<8*(l+c%4*f),u+=2}return{value:t,binLen:8*u+n}};break;case"B64":e=function(e,t,n){var i,a,o,r,s,d,c,l,u=0;if(-1===e.search(/^[a-zA-Z0-9=+\/]+$/))throw Error("Invalid character in base-64 string");if(a=e.indexOf("="),e=e.replace(/\=/g,""),-1!==a&&a<e.length)throw Error("Invalid '=' found in base-64 string");for(t=t||[0],d=(n=n||0)>>>3,l=-1===f?3:0,a=0;a<e.length;a+=4){for(s=e.substr(a,4),o=r=0;o<s.length;o+=1)r|=(i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(s.charAt(o)))<<18-6*o;for(o=0;o<s.length-1;o+=1){for(i=(c=u+d)>>>2;t.length<=i;)t.push(0);t[i]|=(r>>>16-8*o&255)<<8*(l+c%4*f),u+=1}}return{value:t,binLen:8*u+n}};break;case"BYTES":e=function(e,t,n){var i,a,o,r,s,d;for(t=t||[0],o=(n=n||0)>>>3,d=-1===f?3:0,a=0;a<e.length;a+=1)i=e.charCodeAt(a),t.length<=(r=(s=a+o)>>>2)&&t.push(0),t[r]|=i<<8*(d+s%4*f);return{value:t,binLen:8*e.length+n}};break;case"ARRAYBUFFER":try{e=new ArrayBuffer(0)}catch(e){throw Error("ARRAYBUFFER not supported by this environment")}e=function(e,t,n){return i(new Uint8Array(e),t,n,f)};break;case"UINT8ARRAY":try{e=new Uint8Array(0)}catch(e){throw Error("UINT8ARRAY not supported by this environment")}e=function(e,t,n){return i(e,t,n,f)};break;default:throw Error("format must be HEX, TEXT, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}return e}function l(e,t){return e<<t|e>>>32-t}function w(e,t){return 32<t?new C(e.b<<(t-=32)|e.a>>>32-t,e.a<<t|e.b>>>32-t):0!==t?new C(e.a<<t|e.b>>>32-t,e.b<<t|e.a>>>32-t):e}function n(e,t){return e>>>t|e<<32-t}function a(e,t){var n=null,n=new C(e.a,e.b);return t<=32?new C(n.a>>>t|n.b<<32-t&4294967295,n.b>>>t|n.a<<32-t&4294967295):new C(n.b>>>t-32|n.a<<64-t&4294967295,n.a>>>t-32|n.b<<64-t&4294967295)}function o(e,t){return t<=32?new C(e.a>>>t,e.b>>>t|e.a<<32-t&4294967295):new C(0,e.a>>>t-32)}function k(e,t,n){return e&t^~e&n}function O(e,t,n){return new C(e.a&t.a^~e.a&n.a,e.b&t.b^~e.b&n.b)}function x(e,t,n){return e&t^e&n^t&n}function U(e,t,n){return new C(e.a&t.a^e.a&n.a^t.a&n.a,e.b&t.b^e.b&n.b^t.b&n.b)}function R(e){return n(e,2)^n(e,13)^n(e,22)}function j(e){var t=a(e,28),n=a(e,34);return e=a(e,39),new C(t.a^n.a^e.a,t.b^n.b^e.b)}function N(e){return n(e,6)^n(e,11)^n(e,25)}function F(e){var t=a(e,14),n=a(e,18);return e=a(e,41),new C(t.a^n.a^e.a,t.b^n.b^e.b)}function z(e){return n(e,7)^n(e,18)^e>>>3}function Y(e){var t=a(e,1),n=a(e,8);return e=o(e,7),new C(t.a^n.a^e.a,t.b^n.b^e.b)}function J(e){return n(e,17)^n(e,19)^e>>>10}function Q(e){var t=a(e,19),n=a(e,61);return e=o(e,6),new C(t.a^n.a^e.a,t.b^n.b^e.b)}function B(e,t){var n=(65535&e)+(65535&t);return((e>>>16)+(t>>>16)+(n>>>16)&65535)<<16|65535&n}function X(e,t,n,i){var a=(65535&e)+(65535&t)+(65535&n)+(65535&i);return((e>>>16)+(t>>>16)+(n>>>16)+(i>>>16)+(a>>>16)&65535)<<16|65535&a}function L(e,t,n,i,a){var o=(65535&e)+(65535&t)+(65535&n)+(65535&i)+(65535&a);return((e>>>16)+(t>>>16)+(n>>>16)+(i>>>16)+(a>>>16)+(o>>>16)&65535)<<16|65535&o}function $(e,t){var n=(65535&e.b)+(65535&t.b),i=(e.b>>>16)+(t.b>>>16)+(n>>>16),a=(65535&i)<<16|65535&n;return n=(65535&e.a)+(65535&t.a)+(i>>>16),new C((65535&(e.a>>>16)+(t.a>>>16)+(n>>>16))<<16|65535&n,a)}function Z(e,t,n,i){var a=(65535&e.b)+(65535&t.b)+(65535&n.b)+(65535&i.b),o=(e.b>>>16)+(t.b>>>16)+(n.b>>>16)+(i.b>>>16)+(a>>>16),r=(65535&o)<<16|65535&a;return a=(65535&e.a)+(65535&t.a)+(65535&n.a)+(65535&i.a)+(o>>>16),new C((65535&(e.a>>>16)+(t.a>>>16)+(n.a>>>16)+(i.a>>>16)+(a>>>16))<<16|65535&a,r)}function ee(e,t,n,i,a){var o=(65535&e.b)+(65535&t.b)+(65535&n.b)+(65535&i.b)+(65535&a.b),r=(e.b>>>16)+(t.b>>>16)+(n.b>>>16)+(i.b>>>16)+(a.b>>>16)+(o>>>16),s=(65535&r)<<16|65535&o;return o=(65535&e.a)+(65535&t.a)+(65535&n.a)+(65535&i.a)+(65535&a.a)+(r>>>16),new C((65535&(e.a>>>16)+(t.a>>>16)+(n.a>>>16)+(i.a>>>16)+(a.a>>>16)+(o>>>16))<<16|65535&o,s)}function f(e,t){return new C(e.a^t.a,e.b^t.b)}function D(e){var t,n=[];if("SHA-1"===e)n=[1732584193,4023233417,2562383102,271733878,3285377520];else if(0===e.lastIndexOf("SHA-",0))switch(n=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],t=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],e){case"SHA-224":break;case"SHA-256":n=t;break;case"SHA-384":n=[new C(3418070365,n[0]),new C(1654270250,n[1]),new C(2438529370,n[2]),new C(355462360,n[3]),new C(1731405415,n[4]),new C(41048885895,n[5]),new C(3675008525,n[6]),new C(1203062813,n[7])];break;case"SHA-512":n=[new C(t[0],4089235720),new C(t[1],2227873595),new C(t[2],4271175723),new C(t[3],1595750129),new C(t[4],2917565137),new C(t[5],725511199),new C(t[6],4215389547),new C(t[7],327033209)];break;default:throw Error("Unknown SHA variant")}else{if(0!==e.lastIndexOf("SHA3-",0)&&0!==e.lastIndexOf("SHAKE",0))throw Error("No SHA variants supported");for(e=0;e<5;e+=1)n[e]=[new C(0,0),new C(0,0),new C(0,0),new C(0,0),new C(0,0)]}return n}function G(e,t){for(var n,i=[],a=t[0],o=t[1],r=t[2],s=t[3],d=t[4],c=0;c<80;c+=1)i[c]=c<16?e[c]:l(i[c-3]^i[c-8]^i[c-14]^i[c-16],1),n=c<20?L(l(a,5),o&r^~o&s,d,1518500249,i[c]):c<40?L(l(a,5),o^r^s,d,1859775393,i[c]):c<60?L(l(a,5),x(o,r,s),d,2400959708,i[c]):L(l(a,5),o^r^s,d,3395469782,i[c]),d=s,s=r,r=l(o,30),o=a,a=n;return t[0]=B(a,t[0]),t[1]=B(o,t[1]),t[2]=B(r,t[2]),t[3]=B(s,t[3]),t[4]=B(d,t[4]),t}function te(e,t,n,i){for(var a=15+(t+65>>>9<<4);e.length<=a;)e.push(0);for(e[t>>>5]|=128<<24-t%32,e[a]=4294967295&(t+=n),e[a-1]=t/4294967296|0,t=e.length,a=0;a<t;a+=16)i=G(e.slice(a,a+16),i);return i}function H(e,t,n){var i,a,o,r,s,d,c,l,u,w,f,g,p,h,A,m,P,I,y,b,W,S,v,M=[];if("SHA-224"===n||"SHA-256"===n)w=64,g=1,S=Number,p=B,h=X,A=L,m=z,P=J,I=R,y=N,W=x,b=k,v=q;else{if("SHA-384"!==n&&"SHA-512"!==n)throw Error("Unexpected error in SHA-2 implementation");w=80,g=2,S=C,p=$,h=Z,A=ee,m=Y,P=Q,I=j,y=F,W=U,b=O,v=V}for(n=t[0],i=t[1],a=t[2],o=t[3],r=t[4],s=t[5],d=t[6],c=t[7],f=0;f<w;f+=1)f<16?(l=e.length<=(u=f*g)?0:e[u],u=e.length<=u+1?0:e[u+1],M[f]=new S(l,u)):M[f]=h(P(M[f-2]),M[f-7],m(M[f-15]),M[f-16]),l=A(c,y(r),b(r,s,d),v[f],M[f]),u=p(I(n),W(n,i,a)),c=d,d=s,s=r,r=p(o,l),o=a,a=i,i=n,n=p(l,u);return t[0]=p(n,t[0]),t[1]=p(i,t[1]),t[2]=p(a,t[2]),t[3]=p(o,t[3]),t[4]=p(r,t[4]),t[5]=p(s,t[5]),t[6]=p(d,t[6]),t[7]=p(c,t[7]),t}function K(e,t){var n,i,a,o=[],r=[];if(null!==e)for(i=0;i<e.length;i+=2)t[(i>>>1)%5][(i>>>1)/5|0]=f(t[(i>>>1)%5][(i>>>1)/5|0],new C(e[i+1],e[i]));for(n=0;n<24;n+=1){for(a=D("SHA3-"),i=0;i<5;i+=1){var s=t[i][0],d=t[i][1],c=t[i][2],l=t[i][3],u=t[i][4];o[i]=new C(s.a^d.a^c.a^l.a^u.a,s.b^d.b^c.b^l.b^u.b)}for(i=0;i<5;i+=1)r[i]=f(o[(i+4)%5],w(o[(i+1)%5],1));for(i=0;i<5;i+=1)for(s=0;s<5;s+=1)t[i][s]=f(t[i][s],r[i]);for(i=0;i<5;i+=1)for(s=0;s<5;s+=1)a[s][(2*i+3*s)%5]=w(t[i][s],p[i][s]);for(i=0;i<5;i+=1)for(s=0;s<5;s+=1)t[i][s]=f(a[i][s],new C(~a[(i+1)%5][s].a&a[(i+2)%5][s].a,~a[(i+1)%5][s].b&a[(i+2)%5][s].b));t[0][0]=f(t[0][0],g[n])}return t}var q,V,g,p;V=[new C((q=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298])[0],3609767458),new C(q[1],602891725),new C(q[2],3964484399),new C(q[3],2173295548),new C(q[4],4081628472),new C(q[5],3053834265),new C(q[6],2937671579),new C(q[7],3664609560),new C(q[8],2734883394),new C(q[9],1164996542),new C(q[10],1323610764),new C(q[11],3590304994),new C(q[12],4068182383),new C(q[13],991336113),new C(q[14],633803317),new C(q[15],3479774868),new C(q[16],2666613458),new C(q[17],944711139),new C(q[18],2341262773),new C(q[19],2007800933),new C(q[20],1495990901),new C(q[21],1856431235),new C(q[22],3175218132),new C(q[23],2198950837),new C(q[24],3999719339),new C(q[25],766784016),new C(q[26],2566594879),new C(q[27],3203337956),new C(q[28],1034457026),new C(q[29],2466948901),new C(q[30],3758326383),new C(q[31],168717936),new C(q[32],1188179964),new C(q[33],1546045734),new C(q[34],1522805485),new C(q[35],2643833823),new C(q[36],2343527390),new C(q[37],1014477480),new C(q[38],1206759142),new C(q[39],344077627),new C(q[40],1290863460),new C(q[41],3158454273),new C(q[42],3505952657),new C(q[43],106217008),new C(q[44],3606008344),new C(q[45],1432725776),new C(q[46],1467031594),new C(q[47],851169720),new C(q[48],3100823752),new C(q[49],1363258195),new C(q[50],3750685593),new C(q[51],3785050280),new C(q[52],3318307427),new C(q[53],3812723403),new C(q[54],2003034995),new C(q[55],3602036899),new C(q[56],1575990012),new C(q[57],1125592928),new C(q[58],2716904306),new C(q[59],442776044),new C(q[60],593698344),new C(q[61],3733110249),new C(q[62],2999351573),new C(q[63],3815920427),new C(3391569614,3928383900),new C(3515267271,566280711),new C(3940187606,3454069534),new C(4118630271,4000239992),new C(116418474,1914138554),new C(174292421,2731055270),new C(289380356,3203993006),new C(460393269,320620315),new C(685471733,587496836),new C(852142971,1086792851),new C(1017036298,365543100),new C(1126000580,2618297676),new C(1288033470,3409855158),new C(1501505948,4234509866),new C(1607167915,987167468),new C(1816402316,1246189591)],g=[new C(0,1),new C(0,32898),new C(2147483648,32906),new C(2147483648,2147516416),new C(0,32907),new C(0,2147483649),new C(2147483648,2147516545),new C(2147483648,32777),new C(0,138),new C(0,136),new C(0,2147516425),new C(0,2147483658),new C(0,2147516555),new C(2147483648,139),new C(2147483648,32905),new C(2147483648,32771),new C(2147483648,32770),new C(2147483648,128),new C(0,32778),new C(2147483648,2147483658),new C(2147483648,2147516545),new C(2147483648,32896),new C(0,2147483649),new C(2147483648,2147516424)],p=[[0,36,3,41,18],[1,44,10,45,2],[62,6,43,15,61],[28,55,25,21,56],[27,20,39,8,14]],e.exports&&(e.exports=t)})(t={exports:{}});var t=t.exports,n=e({__proto__:null,default:t},[t]);async function r(e){var e=await e.arrayBuffer(),t=new n("SHA-256","ARRAYBUFFER");return t.update(e),t.getHash("B64")}function s(t){let n="";var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let e=0;e<t;e++)n+=i.charAt(Math.floor(Math.random()*i.length));return n}function i(e){return 0<e.unreadCount}function a(e){var t=window.Store.Chat.filter(i).map(e=>WAPI._serializeChatObj(e));return void 0!==e&&e(t),t}async function o(e){return(await WAPI.getGroupMetadata(e)).participants}function c(i,a,e,t){var o=window.Store.Chat._models;const r=[];for(const u in o)if(!isNaN(u)){const w=o[u];let n=WAPI._serializeChatObj(w);n.messages=[];var s,d=w.msgs._models;for(let e=d.length-1;0<=e;e--){const f=d[e];"boolean"==typeof f.isNewMsg&&!1!==f.isNewMsg&&(f.isNewMsg=!1,(s=WAPI.processMessageObj(f,i,a))&&n.messages.push(s))}if(0<n.messages.length)r.push(n);else if(e){let t=w.unreadCount;for(let e=d.length-1;0<=e;e--){var c=d[e];if(0<t)c.isSentByMe||(l=WAPI.processMessageObj(c,i,a),n.messages.unshift(l),--t);else{if(-1!==t)break;if(!c.isSentByMe){var l=WAPI.processMessageObj(c,i,a);n.messages.unshift(l);break}}}0<n.messages.length&&(w.unreadCount=0,r.push(n))}}return void 0!==t&&t(r),r}function l(e,n,i,t){var a,o=WAPI.getChat(e).msgs._models;let r=[];for(let t=o.length-1;0<=t;t--)if("remove"!==t){let e=o[t];"boolean"==typeof e.isNewMsg&&!1!==e.isNewMsg&&(e.isNewMsg=!1,(a=WAPI.processMessageObj(e,n,i))&&r.push(a))}return void 0!==t&&t(r),r}async function u(e,t){const n=WAPI.getChat(e);for(;!n.msgs.msgLoadState.noEarlierMsgs;)console.log("Loading..."),await n.loadEarlierMsgs();return console.log("done"),!0}async function w(e,t){Array.isArray(t)||(t=[t]);const n=new Store.MediaCollection({chatParticipantCount:e.getParticipantCount()});return await n.processAttachments("0.4.613"===Debug.VERSION?t:t.map(e=>({file:e})),e,1),n}async function f(e,t,n,i,a){if(a=a||"sendFile","string"!=typeof n&&null!=n||"string"!=typeof i&&null!=i)return WAPI.scope(t,!0,null,"incorrect parameter, insert an string.");var o=e.match(/data:([a-zA-Z0-9]+\/[a-zA-Z0-9-.+]+).*,.*/),t=(o&&o.length&&(o=o[1]),await WAPI.sendExist(t));return t.erro?t:(e=await((e=await w(t,d(e,n))).models||e._models)[0].sendToChat(t,{caption:i})||"",a={type:a,filename:n,text:i,mimeType:o},n=await WAPI.getchatId(t.id),i="success"===e||"OK"===e?WAPI.scope(n,!1,e,null):WAPI.scope(n,!0,e,null),Object.assign(i,a),i)}async function g(e,t,n,i){const a=await WAPI.sendExist(t);if(a.erro)return a;var o=await window.WAPI.getNewMessageId(a.id._serialized),r=await Store.MaybeMeUser.getMaybeMeUser(),s=await WAPI.getchatId(a.id).catch(()=>WAPI.scope(a.id,!0,404,"Error to number "+t)),s=(s&&(a.lastReceivedKey&&a.lastReceivedKey._serialized&&(a.lastReceivedKey._serialized=s._serialized),a.lastReceivedKey&&a.lastReceivedKey.id&&(a.lastReceivedKey.id=s.id)),{id:o,ack:0,encFilehash:e.uploadhash,from:r,to:a.id,local:!0,self:"out",t:parseInt((new Date).getTime()/1e3),isNewMsg:!0,type:"sticker",deprecatedMms3Url:e.clientUrl,filehash:e.filehash,mediaKey:e.mediaKey,mimetype:"image/webp",height:n&&n.height?n.height:512,width:n&&n.width?n.width:512}),r=(await Promise.all(window.Store.addAndSendMsgToChat(a,s)))[1],e={type:i};if("success"===r||"OK"===r)return n=WAPI.scope(o,!1,r,null),Object.assign(n,e),n;s=WAPI.scope(o,!0,r,null);return Object.assign(s,e),s}async function p(e,t,n,i){e=d("data:image/webp;base64,"+e,"file.webp");return g(await window.WAPI.encryptAndUploadFile("sticker",e),t,n,i)}function h(e=!0,t){return window.WAPI._newMessagesCallbacks.push({callback:e=>{t(e)},rmAfterUse:e}),!0}let A={};const m=[{id:"Store",conditions:e=>e.default&&e.default.Chat&&e.default.Msg?e.default:null},{id:"MediaCollection",conditions:e=>e.default&&e.default.prototype&&(void 0!==e.default.prototype.processFiles||void 0!==e.default.prototype.processAttachments)?e.default:null},{id:"MediaProcess",conditions:e=>e.BLOB?e:null},{id:"ChatUtil",conditions:e=>e.sendClear?e:null},{id:"GroupInvite",conditions:e=>e.sendQueryGroupInviteCode&&e.sendRevokeGroupInviteCode?e:null},{id:"Wap",conditions:e=>e.createGroup?e:null},{id:"ServiceWorker",conditions:e=>e.default&&e.default.killServiceWorker?e:null},{id:"Stream",conditions:e=>e.Stream&&e.StreamInfo?e.Stream:null},{id:"State",conditions:e=>e.Socket?e:null},{id:"WapDelete",conditions:e=>e.sendConversationDelete&&1<e.sendConversationDelete.length?e:null},{id:"WapDeleteMsg",conditions:e=>e.sendRevokeMsgs&&e.sendGroupInviteMessage?e:null},{id:"Conn",conditions:e=>e.default&&e.default.ref&&e.default.refTTL?e.default:null},{id:"ConversationMsgs",conditions:e=>e.loadEarlierMsgs?e:null},{id:"WapQuery",conditions:e=>e.default&&e.default.queryExist&&e.default.getCapabilities?e.default:null},{id:"CryptoLib",conditions:e=>e.decryptE2EMedia?e:null},{id:"OpenChat",conditions:e=>e.default&&e.default.prototype&&e.default.prototype.openChat?e.default:null},{id:"UserConstructor",conditions:e=>e.default&&e.default.prototype&&e.default.prototype.isServer&&e.default.prototype.isUser?e.default:null},{id:"SendTextMsgToChat",conditions:e=>e.sendTextMsgToChat||null},{id:"SendSeen",conditions:e=>e.sendSeen||null},{id:"Archive",conditions:e=>e.setArchive?e:null},{id:"pinChat",conditions:e=>e.setPin?e:null},{id:"sendDelete",conditions:e=>e.sendDelete||null},{id:"addAndSendMsgToChat",conditions:e=>e.addAndSendMsgToChat||null},{id:"sendMsgToChat",conditions:e=>e.sendMsgToChat||null},{id:"Catalog",conditions:e=>e.Catalog||null},{id:"Perfil",conditions:e=>!0===e.__esModule&&e.setPushname&&!e.getComposeContents?e:null},{id:"MsgKey",conditions:e=>e.default&&e.default.toString&&"function"==typeof e.default.toString&&e.default.toString().includes("MsgKey error: obj is null/undefined")?e.default:null},{id:"Parser",conditions:e=>e.convertToTextWithoutSpecialEmojis?e.default:null},{id:"Builders",conditions:e=>e.TemplateMessage&&e.HydratedFourRowTemplate?e:null},{id:"Me",conditions:e=>e.PLATFORMS&&e.Conn?e.Conn:null},{id:"CallUtils",conditions:e=>e.sendCallEnd&&e.parseCall?e:null},{id:"Identity",conditions:e=>e.queryIdentity&&e.updateIdentity?e:null},{id:"MyStatus",conditions:e=>e.getStatus&&e.setMyStatus&&e.queryStatusAll?e:null},{id:"ChatState",conditions:e=>e.sendChatStatePaused&&e.sendChatStateRecording&&e.sendChatStateComposing?e:null},{id:"sendDeleteMsgs",conditions:e=>e.sendDeleteMsgs||null},{id:"GroupActions",conditions:e=>e.sendExitGroup&&e.localExitGroup?e:null},{id:"Features",conditions:e=>e.FEATURE_CHANGE_EVENT&&e.features?e:null},{id:"MessageUtils",conditions:e=>e.storeMessages&&e.appendMessage?e:null},{id:"WebMessageInfo",conditions:e=>e.WebMessageInfo&&e.WebFeatures?e.WebMessageInfo:null},{id:"createMessageKey",conditions:e=>e.createMessageKey&&e.createDeviceSentMessage?e.createMessageKey:null},{id:"Participants",conditions:e=>e.addParticipants&&e.removeParticipants&&e.promoteParticipants&&e.demoteParticipants?e:null},{id:"WidFactory",conditions:e=>e.isWidlike&&e.createWid&&e.createWidFromWidLike?e:null},{id:"Base",conditions:e=>e.setSubProtocol&&e.binSend&&e.actionNode?e:null},{id:"Base2",conditions:e=>e.supportsFeatureFlags&&e.parseMsgStubProto&&e.binSend&&e.subscribeLiveLocation?e:null},{id:"Sticker",conditions:e=>e.StickerCollection&&e.default?e:null},{id:"MediaObject",conditions:e=>e.getOrCreateMediaObject&&e.disassociateMediaFromStickerPack?e:null},{id:"MediaUpload",conditions:e=>e.default&&e.default.mediaUpload?e.default:null},{id:"UploadUtils",conditions:e=>e.default&&e.default.encryptAndUpload?e.default:null},{id:"Cmd",conditions:e=>e.Cmd&&e.Cmd.openChatFromUnread?e.Cmd:null},{id:"ReadSeen",conditions:e=>e.sendSeen?e:null},{id:"Block",conditions:e=>e.blockContact&&e.unblockContact?e:null},{id:"BlockList",conditions:e=>e.BlocklistCollection?e:null},{id:"Theme",conditions:e=>e.getTheme&&e.setTheme?e:null},{id:"Vcard",conditions:e=>e.vcardFromContactModel?e:null},{id:"Profile",conditions:e=>e.sendSetPicture&&e.requestDeletePicture?e:null},{id:"SendMute",conditions:e=>e.sendConversationMute?e:null},{id:"Validators",conditions:e=>e.findLinks?e:null},{id:"Wap2",conditions:e=>e.Wap?e:null},{id:"genId",conditions:e=>e.default&&"function"==typeof e.default&&e.default.toString().match(/crypto/)?e:null},{id:"GroupMetadata",conditions:e=>e.default&&e.default.handlePendingInvite?e:null},{id:"i10n",conditions:e=>e.default&&e.default.downloadAppLocale?e.default:null},{id:"NetworkStatus",conditions:e=>e.default&&e.default._logOnlineOffline?e.default:null},{id:"ws2",conditions:e=>e.default&&e.default.destroyStorage?e.default:null},{id:"Login",conditions:e=>e.startLogout?e:null},{id:"BlobCache",conditions:e=>e.default&&e.default.getOrCreateURL?e.default:null},{id:"infoGroup",conditions:e=>e.queryGroupInviteInfo?e:null},{id:"GroupDesc",conditions:e=>e.setGroupDesc?e:null},{id:"GroupTitle",conditions:e=>e.sendSetGroupSubject?e:null},{id:"GroupSettings",conditions:e=>e.sendSetGroupProperty?e:null},{id:"MaybeMeUser",conditions:e=>e.getMaybeMeUser?e:null},{id:"sendCreateGroup",conditions:e=>e.sendCreateGroup||null},{id:"sendAddParticipants",conditions:e=>e.sendAddParticipants||null},{id:"sendRemoveParticipants",conditions:e=>e.sendRemoveParticipants||null},{id:"sendPromoteParticipants",conditions:e=>e.sendPromoteParticipants||null},{id:"sendDemoteParticipants",conditions:e=>e.sendDemoteParticipants||null},{id:"checkNumberBeta",conditions:e=>e.queryExists&&e.queryPhoneExists?e:null},{id:"checkNumber",conditions:e=>e.default&&e.default.queryExist?e.default:null}];window.webpackChunkwhatsapp_web_client=window.webpackChunkwhatsapp_web_client||[],window.Store={};if(!async function(){window.webpackChunkwhatsapp_web_client.push([["parasite"],{},async function(e){let t=[];for(var n in e.m)t.push(e(n));!async function(i){let a=0,e=m;for(let n in i)if("object"==typeof i[n]&&null!==i[n]&&(e.forEach(e=>{var t;e.conditions&&!e.foundedModule&&null!==(t=e.conditions(i[n]))&&(a++,e.foundedModule=t)}),a==e.length))break;var t=e.find(e=>"Store"===e.id);return window.Store=t.foundedModule||{},e.splice(e.indexOf(t),1),e.forEach(e=>{e.foundedModule&&(window.Store[e.id]=e.foundedModule)}),window.Store.sendMessage=function(e){return window.Store.SendTextMsgToChat(this,...arguments)},window.Store.Chat.modelClass.prototype.sendMessage=function(e){window.Store.SendTextMsgToChat(this,...arguments)},window.Store.MediaCollection&&(window.Store.MediaCollection.prototype.processFiles=window.Store.MediaCollection.prototype.processFiles||window.Store.MediaCollection.prototype.processAttachments),Store.Chat._findAndParse=Store.BusinessProfile._findAndParse,Store.Chat._find=Store.BusinessProfile._find,window.Store}(t)}]),console.log("PARASITE LOADED âœ…")}(),void 0===window.WAPI){window.WAPI={lastRead:{}},window.WAPI.interfaceMute=function(e){var{attributes:e,expiration:t,id:n,isMuted:i,isState:a,promises:o,stale:r}=e;return{attributes:e,expiration:t,id:n,isMuted:i,isState:a,promises:o,stale:r}},window.WAPI.checkIdMessage=async function(e,t){if("string"!=typeof e)return WAPI.scope(null,!0,404,"enter the chatId variable as an string");if((e=await WAPI.sendExist(e))&&404!=e.status){if(!await window.Store.Msg.get(t))return WAPI.scope(e,!0,404,`The id ${t} does not exist!`);var t=e.id,n={type:"checkIdMessage"},t=WAPI.scope(t,!1,"OK","");return Object.assign(t,n),t}return e},window.WAPI.returnReply=async function(e){return"object"!=typeof e?WAPI.scope(null,!0,404,"enter the message variable as an object"):!!(e&&e.quotedMsg&&e.quotedMsg.type&&e.quotedMsgObj)&&e.quotedMsgObj},window.WAPI.checkChat=async function(e){try{if("string"==typeof e&&(e.includes("@g.us")||e.includes("@c.us")||e.includes("@broadcast"))){var t=await Store.Chat.get(e);if(t&&t.t)return WAPI.scope(void 0,!1,200,null,WAPI._serializeChatObj(t));throw 404}throw 400}catch(e){return WAPI.scope(void 0,!0,e,"Was not found")}},window.WAPI.checkNumberStatus=async function(e,t=!1){try{const a={error:404},o=window.Store&&window.Store.State&&window.Store.State.Socket&&window.Store.State.Socket.state?window.Store.State.Socket.state:void 0;var n=WAPI.sendCheckType(e);if(n&&404===n.status)throw Object.assign(a,{text:n.text,numberExists:null}),a;if(!0===t&&"CONNECTED"!==o)throw Object.assign(a,{text:"No connection with WhatsApp",connection:o,numberExists:null}),a;if(WAPI.isBeta())return await Store.checkNumberBeta.queryExists(e).then(e=>{if(e&&"object"==typeof e)return{status:200,numberExists:!0,id:e.wid};throw Object.assign(a,{connection:o,numberExists:!1,text:"The number does not exist"})}).catch(e=>{if(e.text)throw e;throw Object.assign(e,{connection:o,numberExists:!1,text:e})});var i=await Store.checkNumber.queryExist(e);return 200===i.status?{status:i.status,numberExists:!0,id:i.jid}:{status:i.status,numberExists:!1,text:"The number does not exist"}}catch(e){return{status:e.error,text:e.text,numberExists:e.numberExists,connection:e.connection}}},window.WAPI.sendCheckType=function(e=void 0){return e?"string"==typeof e?(n="@broadcast",i="@g.us",(t="@c.us")!==e.substr(-t.length,t.length)&&n!==e.substr(-n.length,n.length)&&i!==e.substr(-i.length,i.length)?WAPI.scope(e,!0,404,"The chat number must contain the parameters @c.us, @broadcast or @g.us. At the end of the number!"):t===e.substr(-t.length,t.length)&&(e.match(/(@c.us)/g)&&1<e.match(/(@c.us)/g).length||!e.match(/^(\d+(\d)*@c.us)$/g))?WAPI.scope(e,!0,404,"incorrect parameters! Use as an example: 000000000000@c.us"):n===e.substr(-n.length,n.length)&&(e.match(/(@broadcast)/g)&&1<e.match(/(@broadcast)/g).length||!e.match(/^(\d+(\d)*@broadcast)$/g))?WAPI.scope(e,!0,404,"incorrect parameters! Use as an example: 0000000000@broadcast"):i===e.substr(-i.length,i.length)&&e.match(/(@g.us)/g)&&1<e.match(/(@g.us)/g).length?WAPI.scope(e,!0,404,"incorrect parameters! Use as an example: 00000000-000000@g.us or 00000000000000@g.us"):void 0):void 0:WAPI.scope(e,!0,404,"It is necessary to pass a number!");var t,n,i},window.WAPI.isBeta=function(){return!(window.localStorage.getItem("WASecretBundle")||window.localStorage.getItem("WAToken1")||window.localStorage.getItem("WAToken2"))},window.WAPI.setProfilePic=async function(e,t){t=t||await Store.MaybeMeUser.getMaybeMeUser();var n="data:image/jpeg;base64,";return Store.Profile.sendSetPicture(t._serialized,n+e.b,n+e.a)},window.WAPI.getSessionTokenBrowser=async function(){var e,t,n,i;if(window.localStorage)return{WABrowserId:e,WASecretBundle:t,WAToken1:n,WAToken2:i}=await JSON.parse(JSON.stringify(window.localStorage)),{WABrowserId:e,WASecretBundle:t,WAToken1:n,WAToken2:i}},window.WAPI.scope=function(e,t,n,i=null,a=null){return{me:WAPI.getHost(),to:e,erro:t,text:i,status:n,result:a}},window.WAPI.getchatId=async function(e){if(e){e=await WAPI.getChatById(e);if(e&&"object"==typeof e){var t=e.lastReceivedKey;if(t&&"object"==typeof t)return e={formattedName:e.contact.formattedName,isBusiness:e.contact.isBusiness,isMyContact:e.contact.isMyContact,verifiedName:e.contact.verifiedName,pushname:e.contact.pushname,isOnline:e.isOnline},Object.assign(t,e),t}}},window.WAPI.sendExist=async function(e,t=!0,n=!0){var i=WAPI.sendCheckType(e);if(i&&404===i.status)return i;if(404===(i=await window.WAPI.checkNumberStatus(e,!1)).status&&!e.includes("@g.us")&&!e.includes("@broadcast"))return WAPI.scope(e,!0,i.status,"The number does not exist");var a,o=new Store.WidFactory.createWid(e);let r=i&&i.id&&i.id._serialized?await window.WAPI.getChat(i.id._serialized):void 0;return i.numberExists&&void 0===r&&(a=new window.Store.UserConstructor(e,{intentionallyUsePrivateConstructor:!0}),r=await Store.Chat.find(a)),r||(a=await window.Store.Chat.find(o))&&(r=a&&a.id&&a.id._serialized?await window.WAPI.getChat(a.id._serialized):void 0),i.numberExists||r.t||!r.isUser?i.numberExists||r.t||!r.isGroup?!i.numberExists&&!r.t&&r.id&&"status"!=r.id.user&&r.isBroadcast?WAPI.scope(e,!0,i.status,"The transmission list number does not exist on your chat list, or it does not exist at all!"):r?(n&&await window.Store.SendSeen(r,!1),t?r:WAPI.scope(e,!1,200)):WAPI.scope(e,!0,404):WAPI.scope(e,!0,i.status,"The group number does not exist on your chat list, or it does not exist at all!"):WAPI.scope(e,!0,i.status,"The number does not exist")},window.WAPI.pinChat=async function(e,t=!0,n=!1){if("boolean"!=typeof t||"boolean"!=typeof n)return WAPI.scope(e,!0,null,"incorrect parameter, insert a boolean true or false");let i=t?"pin":"unpin",a=void 0;var o,r;return(e=await WAPI.sendExist(e,!0,n)).erro?e:(o={type:"pinChat",typefix:i},r=await WAPI.getchatId(e.id),await Store.pinChat.setPin(e,t).then(e=>{var t=WAPI.scope(r,!1,"OK",null);Object.assign(t,o),a=t}).catch(e=>{e=WAPI.scope(r,!0,e,"Pin Chat first");Object.assign(e,o),a=e}),a)},window.WAPI.setTheme=async function(e){return"dark"==e||"light"==e?(await Store.Theme.setTheme(e),!0):console.error("Use type dark or light")},window.WAPI.getTheme=async function(){return Store.Theme.getTheme()},window.WAPI._serializeRawObj=e=>e&&e.toJSON?e.toJSON():{},window.WAPI._serializeChatObj=e=>null==e?null:Object.assign(window.WAPI._serializeRawObj(e),{kind:e.kind,isGroup:e.isGroup,contact:e.contact?window.WAPI._serializeContactObj(e.contact):null,groupMetadata:e.groupMetadata?window.WAPI._serializeRawObj(e.groupMetadata):null,presence:e.presence?window.WAPI._serializeRawObj(e.presence):null,msgs:null,isOnline:e.__x_presence.attributes.isOnline||null,lastSeen:e&&e.previewMessage&&e.previewMessage.__x_ephemeralStartTimestamp?1e3*e.previewMessage.__x_ephemeralStartTimestamp:null}),window.WAPI._serializeContactObj=e=>null==e?null:(!e.profilePicThumb&&e.id&&window.Store.ProfilePicThumb&&(e.profilePicThumb=window.Store.ProfilePicThumb.get(e.id)),Object.assign(window.WAPI._serializeRawObj(e),{formattedName:e.formattedName,displayName:e.displayName,formattedShortName:e.formattedShortName,formattedShortNameWithNonBreakingSpaces:e.formattedShortNameWithNonBreakingSpaces,isHighLevelVerified:e.isHighLevelVerified,isMe:e.isMe,mentionName:e.mentionName,notifyName:e.notifyName,isMyContact:e.isMyContact,isPSA:e.isPSA,isUser:e.isUser,isVerified:e.isVerified,isWAContact:e.isWAContact,profilePicThumbObj:e.profilePicThumb?WAPI._serializeProfilePicThumb(e.profilePicThumb):{},statusMute:e.statusMute,msgs:null})),window.WAPI._serializeMessageObj=t=>{if(null==t)return null;const n=t.chat?WAPI._serializeChatObj(t.chat):{};return t.quotedMsg&&t.quotedMsgObj(),Object.assign(window.WAPI._serializeRawObj(t),{id:t.id._serialized,from:t.from._serialized,quotedParticipant:t.quotedParticipant&&t.quotedParticipant._serialized||void 0,author:t.author&&t.author._serialized||void 0,chatId:t.id&&t.id.remote?t.id.remote:t.chatId&&t.chatId._serialized?t.chatId._serialized:void 0,to:t.to&&t.to._serialized||void 0,fromMe:t.id.fromMe,sender:t.senderObj?WAPI._serializeContactObj(t.senderObj):null,timestamp:t.t,content:t.body,body:t.body,isGroupMsg:t.isGroupMsg,isLink:t.isLink,isMMS:t.isMMS,isMedia:t.isMedia,isNotification:t.isNotification,isPSA:t.isPSA,type:t.type,chat:n,isOnline:n.isOnline,lastSeen:n.lastSeen,quotedMsgObj:t.quotedMsg,quotedStanzaId:t.quotedStanzaID||void 0,mediaData:window.WAPI._serializeRawObj(t.mediaData),caption:t.caption,deprecatedMms3Url:t.deprecatedMms3Url,directPath:t.directPath,encFilehash:t.encFilehash,filehash:t.filehash,filename:t.filename,mimetype:t.mimetype,clientUrl:t.clientUrl,mediaKey:t.mediaKey,size:t.size,t:t.t,isNewMsg:t.isNewMsg,linkPreview:t.linkPreview,text:t.text,height:t.height,width:t.width,self:t.self,initialPageSize:t.initialPageSize,lat:t.lat||void 0,lng:t.lng||void 0,ack:t.ack,reply:e=>window.WAPI.reply(n.id._serialized,e,t)})},window.WAPI._serializeProfilePicThumb=e=>null==e?null:Object.assign({},{eurl:e.eurl,id:e.id,img:e.img,imgFull:e.imgFull,raw:e.raw,tag:e.tag}),window.WAPI._serializeMeObj=async e=>{if(null==e)return null;var t=window.Store&&window.Store.State&&window.Store.State.Socket&&window.Store.State.Socket.state?window.Store.State.Socket.state:void 0;let n=void 0;e&&e.id&&e.id.contact&&!e.id.contact.profilePicThumb&&e.id.id&&(n=await window.Store.ProfilePicThumb.get(e.id.id._serialized));var i={};if(!e.id)return i;Object.assign(i,{id:e.id.id||null,email:e.id.email||null,description:e.id.description||null,statusConnection:t,businessHours:{timezone:e.id.businessHours&&e.id.businessHours.timezone?e.id.businessHours.timezone:null},pushname:e.id.contact&&e.id.contact.pushname?e.id.contact.pushname:null,website:e.id.website||null,formattedTitle:e.id.formattedTitle||null,categories:e.id.categories||null,displayName:e.id.contact&&e.id.contact.displayName?e.id.contact.displayName:null,isBusiness:e.id.contact&&e.id.contact.isBusiness?e.id.contact.isBusiness:null,imgUrl:e.id.contact&&e.id.contact.profilePicThumb&&e.id.contact.profilePicThumb.eurl?e.id.contact.profilePicThumb.eurl:n&&n.eurl?n.eurl:null,imgFull:e.id.contact&&e.id.contact.profilePicThumb&&e.id.contact.profilePicThumb.imgFull?e.id.contact.profilePicThumb.imgFull:n&&n.imgFull?n.imgFull:null,previewEurl:e.id.contact&&e.id.contact.profilePicThumb&&e.id.contact.profilePicThumb.previewEurl?e.id.contact.profilePicThumb.previewEurl:n&&n.imgs?n.imgs:null});t=Store.Me||void 0;return t&&t.wid&&t.wid._serialized&&i.id&&i.id._serialized&&t.wid&&t.wid._serialized&&i.id._serialized===t.wid._serialized&&t.phone&&Object.assign(i,{binVersion:t.binVersion||null,allLocales:t.allLocales||null,battery:t.battery||null,phone:{device_manufacturer:t.phone.device_manufacturer||null,device_model:t.phone.device_model||null,os_build_number:t.phone.os_build_number||null,os_version:t.phone.os_version||null,wa_version:t.phone.wa_version||null}}),i},window.WAPI.createGroup=async function(e,t){return Array.isArray(t)||(t=[t]),!!(t=(t=await Promise.all(t.map(e=>WAPI.sendExist(e)))).filter(e=>!e.erro&&e.isUser).map(e=>e.id)).length&&Store.sendCreateGroup(e,t)},window.WAPI.leaveGroup=async function(e){return e="string"==typeof e?e:e._serialized,e=WAPI.getChat(e),Store.GroupActions.sendExitGroup(e)},window.WAPI.revokeGroupInviteLink=async function(e){return!!(e=Store.Chat.get(e)).isGroup&&Store.GroupInvite.sendRevokeGroupInviteCode(e.id)},window.WAPI.getGroupInviteLink=async function(e){return(e=Store.Chat.get(e)).isGroup?"https://chat.whatsapp.com/"+await Store.GroupInvite.sendQueryGroupInviteCode(e.id):""},window.WAPI.getGroupInfoFromInviteLink=async function(e){return await Store.infoGroup.queryGroupInviteInfo(e)},window.WAPI.getGroupAdmins=async function(e,t){return e=(await o(e)).filter(e=>e.isAdmin).map(e=>e.id),void 0!==t&&t(e),e},window.WAPI.removeParticipant=async function(e,t){return e=window.Store.WidFactory.createWid(e),Array.isArray(t)||(t=[t]),!!(t=await Promise.all(t.map(e=>window.Store.WidFactory.createWid(e)))).length&&(t=t.map(e=>window.Store.WidFactory.createWid(e)),window.Store.sendRemoveParticipants(e,t))},window.WAPI.addParticipant=async function(e,t){return e=window.Store.WidFactory.createWid(e),Array.isArray(t)||(t=[t]),!!(t=(t=await Promise.all(t.map(e=>WAPI.sendExist(e)))).filter(e=>!e.erro&&e.isUser).map(e=>e.id)).length&&(t=t.map(e=>window.Store.WidFactory.createWid(e)),window.Store.sendAddParticipants(e,t))},window.WAPI.promoteParticipant=async function(e,t){return e=window.Store.WidFactory.createWid(e),Array.isArray(t)||(t=[t]),!!(t=(t=await Promise.all(t.map(e=>WAPI.sendExist(e)))).filter(e=>!e.erro&&e.isUser).map(e=>e.id)).length&&(t=t.map(e=>window.Store.WidFactory.createWid(e)),window.Store.sendPromoteParticipants(e,t))},window.WAPI.demoteParticipant=async function(e,t){return e=window.Store.WidFactory.createWid(e),Array.isArray(t)||(t=[t]),!!(t=await Promise.all(t.map(e=>window.Store.WidFactory.createWid(e)))).length&&(t=t.map(e=>window.Store.WidFactory.createWid(e)),window.Store.sendDemoteParticipants(e,t))},window.WAPI.joinGroup=async function(e){return await Store.WapQuery.acceptGroupInvite(e)},window.WAPI.setGroupDescription=async function(e,t){if("string"!=typeof t||0===t.length)return WAPI.scope(void 0,!0,null,"It is necessary to write a text!");if((e=await WAPI.sendExist(e))&&404!=e.status){const n={type:"setGroupDescription",description:t},i=await WAPI.getchatId(e.id);return window.Store.GroupDesc.setGroupDesc(e,t).then(()=>{var e=WAPI.scope(i,!1,"OK",t);return Object.assign(e,n),e}).catch(()=>{var e=WAPI.scope(i,!0,"error",t);return Object.assign(e,n),e})}return e},window.WAPI.setGroupTitle=async function(e,t){if("string"!=typeof t||0===t.length)return WAPI.scope(void 0,!0,null,"It is necessary to write a text!");if((e=await WAPI.sendExist(e))&&404!=e.status){const n={type:"setGroupTitle",title:t},i=await WAPI.getchatId(e.id);return window.Store.GroupTitle.sendSetGroupSubject(e.id,t).then(()=>{var e=WAPI.scope(i,!1,"OK",t);return Object.assign(e,n),e}).catch(()=>{var e=WAPI.scope(i,!0,"error",t);return Object.assign(e,n),e})}return e},window.WAPI.setGroupSettings=async function(e,t,n){if("string"!=typeof t||0===t.length)return WAPI.scope(void 0,!0,null,"It is necessary to write a settings!");if((e=await WAPI.sendExist(e))&&404!=e.status){const i={type:"setGroupSettings",settings:t},a=await WAPI.getchatId(e.id),o={type:"setGroupSettings",value:n};return window.Store.GroupSettings.sendSetGroupProperty(e.id,t,n).then(()=>{var e=WAPI.scope(a,!1,"OK",i,o);return Object.assign(e,i),e}).catch(()=>{var e=WAPI.scope(a,!0,"error",i,o);return Object.assign(e,i),e})}return e},window.WAPI.sendListMenu=async function(e,t,n,i,a,o){if(!t&&"string"!=typeof t)return WAPI.scope(null,!0,404,"Enter the title variable as an string");if(!n&&"string"!=typeof n)return WAPI.scope(null,!0,404,"Enter the SubTitle variable as an string");if(!i&&"string"!=typeof i)return WAPI.scope(null,!0,404,"Enter the description variable as an string");if(!a&&"string"!=typeof a)return WAPI.scope(null,!0,404,"Enter the buttonText variable as an string");if(!o&&!1===Array.isArray(o))return WAPI.scope(null,!0,404,"Enter the menu variable as an array");for(var r in o)if("remove"!==r){if(!o[r].title||"string"!=typeof o[r].title||!o[r].title.length)return WAPI.scope(null,!0,404,"Incorrect Title passed in menu");if(!(o[r].rows&&Array.isArray(o[r].rows)&&o[r].rows.length))return WAPI.scope(null,!0,404,"Rows must be an object array");for(var s in o[r].rows)if("remove"!==s){if(!o[r].rows[s].title||!o[r].rows[s].title.length)return WAPI.scope(null,!0,404,"Enter the Title variable as an string");o[r].rows[s].description&&o[r].rows[s].description.length&&(o[r].rows[s].rowId||(o[r].rows[s].rowId="dessert_"+s))}}const d=await WAPI.sendExist(e);var c,l;return d&&404!=d.status&&d.id?(e=await window.WAPI.getNewMessageId(d.id._serialized),l=await Store.MaybeMeUser.getMaybeMeUser(),(c=await WAPI.getchatId(d.id).catch(()=>{}))&&(d.lastReceivedKey._serialized=c._serialized,d.lastReceivedKey.id=c.id),c={id:e,ack:0,from:l,to:d.id,local:!0,self:"out",t:parseInt((new Date).getTime()/1e3),isNewMsg:!0,invis:!0,footer:n,notifyName:"",type:"list",interactiveAnnotations:!0,interactiveMessage:!0,star:!1,broadcast:!1,fromMe:!1,list:{title:t,description:i,buttonText:a,listType:1,sections:o}},"success"===(l=(await Promise.all(window.Store.addAndSendMsgToChat(d,c)))[1])||"OK"===l?WAPI.scope(e,!1,l,null):WAPI.scope(e,!0,l,null)):d},window.WAPI.sendChatstate=async function(e,t){switch(e){case"0":await window.Store.ChatStates.sendChatStateComposing(t);break;case"1":await window.Store.ChatStates.sendChatStateRecording(t);break;case"2":await window.Store.ChatStates.sendChatStatePaused(t);break;default:return!1}return!0},window.WAPI.sendMessageWithThumb=function(e,t,n,i,a,o,r){return void 0===(o=WAPI.getChat(o))?(void 0!==r&&r(!1),!1):(o.sendMessage(a,{linkPreview:{canonicalUrl:t,description:i,matchedText:t,title:n,thumbnail:e},mentionedJidList:[],quotedMsg:null,quotedMsgAdminGroupJid:null}),void 0!==r&&r(!0),!0)},window.WAPI.processMessageObj=function(e,t,n){return e.isNotification?n?WAPI._serializeMessageObj(e):void 0:!1===e.id.fromMe||t?WAPI._serializeMessageObj(e):void 0},window.WAPI.sendMessageWithTags=async function(e,t){var n=(e=e.id?e:Store.Chat.get(e)).id._serialized;if(!(i=e.msgs.filter(e=>e.__x_isSentByMe)[0]))return e.sendMessage(t);var i=Object.create(i),a=await window.WAPI.getNewMessageId(n),o=t.match(/@(\d*)/g).map(e=>new Store.WidFactory.createUserWid(e.replace("@","")))||void 0,n={ack:0,id:a,local:!0,self:"out",t:parseInt((new Date).getTime()/1e3),to:new Store.WidFactory.createWid(n),isNewMsg:!0,type:"chat",body:t,quotedMsg:null,mentionedJidList:o};return Object.assign(i,n),await Store.addAndSendMsgToChat(e,i),a._serialized},window.WAPI.sendMessage=async function(e,t){if("string"!=typeof t||0===t.length)return WAPI.scope(void 0,!0,null,"It is necessary to write a text!");if("string"!=typeof e||0===e.length)return WAPI.scope(e,!0,404,"It is necessary to number");let n=await WAPI.sendExist(e);if(n&&404!=n.status&&n.id){var i={type:"sendText",text:t},a=await window.WAPI.getNewMessageId(n.id._serialized),o=await Store.MaybeMeUser.getMaybeMeUser(),r=await WAPI.getchatId(n.id).catch(()=>WAPI.scope(n.id,!0,404,"Error to number "+e));if(r&&(n.lastReceivedKey&&n.lastReceivedKey._serialized&&(n.lastReceivedKey._serialized=r._serialized),n.lastReceivedKey&&n.lastReceivedKey.id&&(n.lastReceivedKey.id=r.id)),!a)return WAPI.scope(e,!0,404,"Error to newId");r={id:a,ack:0,body:t,from:o,to:n.id,local:!0,self:"out",t:parseInt((new Date).getTime()/1e3),isNewMsg:!0,type:"chat"};try{var s,d=(await Promise.all(window.Store.addAndSendMsgToChat(n,r)))[1];if("success"===d||"OK"===d)return s=WAPI.scope(a,!1,d,t),Object.assign(s,i),s}catch(e){o=WAPI.scope(a,!0,d,"The message was not sent");return Object.assign(o,i),o}r=WAPI.scope(a,!0,d,t);return Object.assign(r,i),r}return n.erro||(n.erro=!0),n},window.WAPI.sendMessage2=function(e,t,n){if(void 0!==(e=WAPI.getChat(e)))try{return void 0!==n?e.sendMessage(t).then(function(){n(!0)}):e.sendMessage(t),!0}catch(e){return void 0!==n&&n(!1),!1}return void 0!==n&&n(!1),!1},window.WAPI.sendSeen=async function(e,t){return!!e&&(void 0!==(e=window.WAPI.getChat(e))?(await Store.ReadSeen.sendSeen(e,!1),t&&t(!0),!0):(t&&t(!1),!1))},window.WAPI.deleteConversation=function(e,t){return e=new window.Store.UserConstructor(e,{intentionallyUsePrivateConstructor:!0}),(e=WAPI.getChat(e))?(window.Store.sendDelete(e,!1).then(()=>{void 0!==t&&t(!0)}).catch(()=>{void 0!==t&&t(!1)}),!0):(void 0!==t&&t(!1),!1)},window.WAPI.deleteMessagesAll=async function(e,t,n){e=new Store.WidFactory.createWid(e);let i=WAPI.getChat(e);if(!i)return!1;let a=(t=Array.isArray(t)?t:[t]).map(e=>"string"==typeof e?window.Store.Msg.get(e):e).filter(e=>e);return!a||(e=n?[i.sendDeleteMsgs?i.sendDeleteMsgs(a,i):Store.WapDeleteMsg.sendDeleteMsgs(i,a)]:[i.sendRevokeMsgs?i.sendRevokeMsgs(a.filter(e=>e.isSentByMe),i):Store.WapDeleteMsg.sendRevokeMsgs(i,a.filter(e=>e.isSentByMe),!0),i.sendDeleteMsgs?i.sendDeleteMsgs(a.filter(e=>!e.isSentByMe),i):Store.WapDeleteMsg.sendDeleteMsgs(i,a.filter(e=>!e.isSentByMe))],Promise.all(e).then(e=>!0))},window.WAPI.deleteMessagesMe=async function(e,t,n){new window.Store.UserConstructor(e,{intentionallyUsePrivateConstructor:!0});let i=window.Store.Chat.get(e);return!!i&&(e=(t=Array.isArray(t)?t:[t]).map(e=>window.Store.Msg.get(e)),n?i.sendRevokeMsgs(e,i):i.sendDeleteMsgs(e,i),!0)},window.WAPI.clearChatMessages=async function(e){return!!(e=await Store.Chat.get(e))&&Store.ChatUtil.sendClear(e,e.lastReceivedKey,!0)},window.WAPI.sendImage=function(e,t,n,i){return f(e,t,n,i,"sendImage")},window.WAPI.sendPtt=async function(n,e){var t,i,a,o;return(e=await WAPI.sendExist(e))&&404!=e.status?(t=await Store.Chat.find(e.id).then(async t=>{var e=d(n);return w(t,e).then(async e=>{e=(e.models||e._models)[0];return e.mediaPrep._mediaData.type="ptt",e.mediaPrep.sendToChat(t,{})})}),i={type:"sendPtt"},a=await WAPI.getchatId(e.id),"success"===t||"OK"===t?(o=WAPI.scope(a,!1,t,null),Object.assign(o,i),o):(o=WAPI.scope(a,!0,t,null),Object.assign(o,i),o)):e},window.WAPI.sendFile=f,window.WAPI.setMyName=async function(e){await window.Store.Perfil.setPushname(e)},window.WAPI.setMyStatus=function(e){return Store.MyStatus.setMyStatus(e)},window.WAPI.sendVideoAsGif=function(n,e,i,a,o){return e=new Store.WidFactory.createWid(e),Store.Chat.find(e).then(t=>{var e=d(n,i);w(t,e).then(e=>{e=(e.models||e._models)[0];e.mediaPrep._mediaData.isGif=!0,e.mediaPrep._mediaData.gifAttribution=1,e.mediaPrep.sendToChat(t,{caption:a}),void 0!==o&&o(!0)})})},window.WAPI.processFiles=w,window.WAPI.sendImageWithProduct=function(a,t,o,e,r,s){Store.Catalog.findCarouselCatalog(e).then(e=>{if(e&&e[0]){const n=e[0].productCollection.get(r),i={productMsgOptions:{businessOwnerJid:n.catalogWid.toString({legacy:!0}),productId:n.id.toString(),url:n.url,productImageCount:n.productImageCollection.length,title:n.name,description:n.description,currencyCode:n.currency,priceAmount1000:n.priceAmount1000,type:"product"},caption:o};e=new Store.WidFactory.createWid(t);return Store.Chat.find(e).then(t=>{var e=d(a,n.name);w(t,e).then(e=>{var n=(e.models||e._models)[0];Object.entries(i.productMsgOptions).map(([e,t])=>n.mediaPrep._mediaData[e]=t),n.mediaPrep.sendToChat(t,i),void 0!==s&&s(!0)})})}})},window.WAPI.sendContactVcard=async function(e,t,n){if("string"!=typeof e||0===e.length)return WAPI.scope(e,!0,404,"It is necessary to pass the number!");if("string"!=typeof t||0===t.length)return WAPI.scope(t,!0,404,"It is necessary to pass the number!");const i=await WAPI.sendExist(e);var a=await WAPI.sendExist(t);if(i&&404!=i.status&&i.id&&a&&404!=a.status&&a.id){var o=await window.WAPI.getNewMessageId(i.id._serialized),r=await WAPI.getchatId(i.id).catch(()=>WAPI.scope(i.id,!0,404,"Error to number "+e));if(r&&(i.lastReceivedKey&&i.lastReceivedKey._serialized&&(i.lastReceivedKey._serialized=r._serialized),i.lastReceivedKey&&i.lastReceivedKey.id&&(i.lastReceivedKey.id=r.id)),!o)return WAPI.scope(e,!0,404,"Error to newId");var r=await Store.MaybeMeUser.getMaybeMeUser(),s=await window.Store.Vcard.vcardFromContactModel(a.__x_contact),a=(n=n||a.__x_formattedTitle,{id:o,ack:0,body:s.vcard,from:r,to:i.id,local:!0,self:"out",t:parseInt((new Date).getTime()/1e3),isNewMsg:!0,type:"vcard"}),n=(await Promise.all(window.Store.addAndSendMsgToChat(i,a)))[1],s={from:t,type:"vcard"};return r="success"===n||"OK"===n?WAPI.scope(o,!1,n,null):WAPI.scope(o,!0,n,null),Object.assign(r,s),r}return i},window.WAPI.sendContactVcardList=async function(e,t){if("string"!=typeof e)return WAPI.scope(e,!0,null,"incorrect parameter, insert an string. Example: '222222222222@c.us'");if(!Array.isArray(t))return WAPI.scope(e,!0,null,"incorrect parameter, insert an array. Example: ['222222222222@c.us', '333333333333@c.us, ... ]");if(1===t.length)return WAPI.scope(e,!0,null,"Enter more than one number to send. Example: ['222222222222@c.us', '333333333333@c.us, ... ]");const n=await WAPI.sendExist(e);if(n&&404!=n.status&&n.id){var i,e=t.map(async e=>WAPI.sendExist(e)),a=await Promise.all(e),o=new Array;for(i in a)"object"==typeof a[i]&&o.push(a[i].__x_contact);var e=o.map(async e=>{if("object"==typeof e)return window.Store.Vcard.vcardFromContactModel(e)}),r=await window.WAPI.getNewMessageId(n.id._serialized),s=await Store.MaybeMeUser.getMaybeMeUser(),d=await WAPI.getchatId(n.id).catch(()=>{}),d=(d&&(n.lastReceivedKey._serialized=d._serialized,n.lastReceivedKey.id=d.id),await Promise.all(e)),e={id:r,ack:0,from:s,local:!0,self:"in",t:parseInt((new Date).getTime()/1e3),to:n.id,type:"multi_vcard",vcardList:d,isNewMsg:!0},s=(await Promise.all(Store.addAndSendMsgToChat(n,e)))[1]||"",d={from:t,type:"multi_vcard"};return e="success"===s||"OK"===s?WAPI.scope(r,!1,s,null):WAPI.scope(r,!0,s,null),Object.assign(e,d),e}return n},window.WAPI.forwardMessages=async function(e,t,n){var o=await WAPI.sendExist(e),r=(Array.isArray(t)||(t=[t]),(await Promise.all(t.map(async e=>WAPI.getMessageById(e,null,!1)))).filter(e=>!n||!e.__x_isSentByMe)),s={type:"forwardMessages"};return new Promise(async(t,a)=>{if(o.id){let i=await window.WAPI.getNewMessageId(o.id._serialized);var e=await WAPI.getchatId(o.id).catch(()=>{});e&&(o.lastReceivedKey._serialized=e._serialized,o.lastReceivedKey.id=e.id),await Promise.each(r,async e=>{if(void 0!==e.erro&&!0===e.erro)return t=WAPI.scope(o.id,!0,null,"message not found"),Object.assign(t,s),void a(t);var t=await Object.create(o.msgs.filter(e=>e.__x_isSentByMe))[0],n=await window.Store.Conn.wid,e=await Object.assign(e),n={id:i,ack:0,from:n,to:o.id,local:!0,self:"out",t:parseInt((new Date).getTime()/1e3),isNewMsg:!0,isForwarded:!0,forwardingScore:1,multicast:!0,__x_isSentByMe:!0};return Object.assign(t,e),Object.assign(t,n),Store.addAndSendMsgToChat(o,t)}).then(async()=>{var e=WAPI.scope(i,!1,200,null);Object.assign(e,s),t(e)}).catch(()=>{var e=WAPI.scope(i,!0,404,null);Object.assign(e,s),a(e)})}else a(o)})},window.WAPI.reply=async function(n,i,a){if("string"!=typeof n)return WAPI.scope(null,!0,404,"enter the chatid variable as an string");if("string"!=typeof i)return WAPI.scope(null,!0,404,"enter the content variable as an string");if("string"!=typeof a)return WAPI.scope(null,!0,404,"enter the content variable as an string");const o=await WAPI.sendExist(n);if(o&&404!=o.status){var n=o.id,r={type:"deleteMessages"};let e={},t=await WAPI.getMessageById(a,null,!1);if(null!=t.erro)return n=WAPI.scope(n,!0,404,`The id ${a} does not exist!`),Object.assign(n,r),n;n=await WAPI.checkIdMessage(t.to._serialized,a);if(1==n.erro)return n;t&&t.canReply()&&(e=t.msgContextInfo(o));n=await WAPI.checkIdMessage(o.id._serialized,a);if(1==n.erro)return n;var a=await window.WAPI.getNewMessageId(o.id._serialized),n=await WAPI.getchatId(o.id).catch(()=>{}),n=(n&&(o.lastReceivedKey._serialized=n._serialized,o.lastReceivedKey.id=n.id),await Store.MaybeMeUser.getMaybeMeUser()),i={id:a,ack:0,body:i,from:n,to:o.id,local:!0,self:"out",t:parseInt((new Date).getTime()/1e3),isNewMsg:!0,type:"chat",...e},n=(await Promise.all(window.Store.addAndSendMsgToChat(o,i)))[1];return"success"===n||"OK"===n?(i=WAPI.scope(a,!1,n,""),Object.assign(i,r),i):(i=WAPI.scope(a,!0,n,""),Object.assign(i,r),i)}return o},window.WAPI._sendSticker=g,window.WAPI.encryptAndUploadFile=async function(e,t){try{var n=await r(t),i=s(32),a=(new AbortController).signal,o=await window.Store.UploadUtils.encryptAndUpload({blob:t,type:e,signal:a,mediaKey:i});return{...o,clientUrl:o.url,filehash:n,id:n,uploadhash:o.encFilehash,mediaBlob:t}}catch{return!1}},window.WAPI.sendImageAsSticker=p,window.WAPI.sendImageAsStickerGif=p,window.WAPI.startTyping=async function(e){var t=window.Store.WidFactory.createWid(e);if(t)return await Store.ChatState.sendChatStateComposing(t),{status:200};throw{error:!0,code:"chat_not_found",message:"Chat not found",chatId:e}},window.WAPI.stopTyping=async function(e){var t=window.Store.WidFactory.createWid(e);if(t)return await Store.ChatState.sendChatStatePaused(t),{status:200};throw{error:!0,code:"chat_not_found",message:"Chat not found",chatId:e}},window.WAPI.sendLocation=async function(n,i,a,o=null){const r=await WAPI.sendExist(n);if(isNaN(Number(i))||isNaN(Number(a)))return WAPI.scope(n,!0,null,"latitude and longitude must be numbers");if(r.erro)return r;{var n=await window.WAPI.getNewMessageId(r.id._serialized),s=await WAPI.getchatId(r.id).catch(()=>{}),d=await Store.MaybeMeUser.getMaybeMeUser(),s=(s&&(r.lastReceivedKey._serialized=s._serialized,r.lastReceivedKey.id=s.id),{ack:0,id:n,local:!0,self:"in",t:parseInt((new Date).getTime()/1e3),to:r.id,from:d,isNewMsg:!0,type:"location",lat:Number(i),lng:Number(a),loc:o}),d=(await Promise.all(Store.addAndSendMsgToChat(r,s)))[1]||"";let e={latitude:i,longitude:a,title:o,type:"location"},t;return t="success"==d||"OK"==d?WAPI.scope(n,!1,d,null):WAPI.scope(n,!0,d,null),Object.assign(t,e),t}},window.WAPI.openChat=async function(e){return e=Store.Chat.get(e),Store.Cmd.openChatBottom(e)},window.WAPI.openChatAt=async function(e,t){const n=Store.Chat.get(e);return e=n.msgs._models.find(e=>e.id.id===t),e={collection:n.msgs,msg:e,isUnreadDivider:!1},await Store.Cmd._openChat(n,e)},window.WAPI.markUnseenMessage=async function(e){return!!e&&(void 0!==(e=window.WAPI.getChat(e))&&(await Store.ReadSeen.markUnread(e,!0),!0))},window.WAPI.sendLinkPreview=async function(e,t,n){n=n||"";const i={Protocol:"^(https?:\\/\\/)?",Domain:"((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|",IP:"((\\d{1,3}\\.){3}\\d{1,3}))",Port:"(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*",Query:"(\\?[;&a-z\\d%_.~+=-]*)?",End:"(\\#[-a-z\\d_]*)?$",Reg:()=>new RegExp(i.Protocol+i.Domain+i.IP+i.Port+i.Query+i.End,"i")};return i.Reg().test(t)?(e=await WAPI.sendExist(e)).erro?e:(a=await window.WAPI.getNewMessageId(e.id._serialized),r=await Store.MaybeMeUser.getMaybeMeUser(),(o=await WAPI.getchatId(e.id).catch(()=>{}))&&(e.lastReceivedKey._serialized=o._serialized,e.lastReceivedKey.id=o.id),o={id:a,ack:0,body:n.includes(t)?n:t+`
`+n,from:r,to:e.id,local:!0,self:"out",t:parseInt((new Date).getTime()/1e3),isNewMsg:!0,type:"chat",subtype:"url",content:t,canonicalUrl:t,description:t,matchedText:t,title:t},r={type:"LinkPreview",url:t,text:n},"success"===(t=(await Promise.all(window.Store.addAndSendMsgToChat(e,o)))[1])||"OK"===t?(n=WAPI.scope(a,!1,t,null),Object.assign(n,r),n):(e=WAPI.scope(a,!0,t,null),Object.assign(e,r),e)):(n="Use a valid HTTP protocol. Example: https://www.youtube.com/watch?v=V1bFr2SWP1",WAPI.scope(e,!0,null,n));var a,o,r},window.WAPI.sendMessageOptions=async function(t,e,n={}){t=Store.Chat.get(t);let i={},a=(n.attachment&&(e=(i=await WWebJS.processMediaData(n.attachment,n.sendAudioAsVoice)).preview,delete n.attachment),{});if(n.quotedMessageId){let e=await WAPI.getMessageById(n.quotedMessageId,null,!1);e&&e.canReply()&&(a=e.msgContextInfo(t)),delete n.quotedMessageId}n.mentionedJidList&&(n.mentionedJidList=n.mentionedJidList.map(e=>window.Store.Contact.get(e).id));let o={},r=(n.location&&(o={type:"location",loc:n.location.description,lat:n.location.latitude,lng:n.location.longitude},delete n.location),{});if(n.contactCard){var s=window.Store.Contact.get(n.contactCard);r={body:window.Store.VCard.vcardFromContactModel(s).vcard,type:"vcard",vcardFormattedName:s.formattedName},delete n.contactCard}else if(n.contactCardList){let e=n.contactCardList.map(e=>window.Store.Contact.get(e));s=e.map(e=>window.Store.VCard.vcardFromContactModel(e));r={type:"multi_vcard",vcardList:s,body:void 0},delete n.contactCardList}else if(n.parseVCards&&"string"==typeof e&&e.startsWith("BEGIN:VCARD")){delete n.parseVCards;try{var d=await window.Store.VCard.parseVcard(e);d&&(r={type:"vcard",vcardFormattedName:await window.Store.VCard.vcardGetNameFromParsed(d)})}catch(e){}}if(n.linkPreview){delete n.linkPreview;s=await window.Store.Validators.findLink(e);if(s){const c=await window.Store.Wap2.default.queryLinkPreview(s.url);c.preview=!0,c.subtype="url",n={...n,...c}}}return d=await window.WAPI.getNewMessageId(t.id._serialized),s=await Store.MaybeMeUser.getMaybeMeUser(),n={...n,id:d,ack:0,body:e,from:s,to:t.id,local:!0,self:"out",t:parseInt((new Date).getTime()/1e3),isNewMsg:!0,type:"chat",...o,...i,...a,...r},await window.Store.addAndSendMsgToChat(t,n),d._serialized},window.WAPI.sendButtons=async function(e,t,n,i){if("string"!=typeof t||0===t.length)return WAPI.scope(e,!0,404,"It is necessary to write a title!");if("string"!=typeof i||0===i.length)return WAPI.scope(e,!0,404,"It is necessary to write a subtitle!");if(Array.isArray(n)&&0<n.length)for(var a in n)if("function"!=typeof n[a]){if(!n[a].buttonText)return WAPI.scope(e,!0,404,"passed object buttonText");if("object"!=typeof n[a].buttonText)return WAPI.scope(e,!0,404,"passed object value in buttonText");if(!n[a].buttonText.displayText)return WAPI.scope(e,!0,404,"passed object displayText");if("string"!=typeof n[a].buttonText.displayText)return WAPI.scope(e,!0,404,"passed string value in displayText");n[a].buttonId||(n[a].buttonId="id"+a),n[a].type||(n[a].type=1)}var o,r=await WAPI.sendExist(e);return r&&404!=r.status&&r.id?(t={id:o=await window.WAPI.getNewMessageId(r.id._serialized),ack:0,from:await Store.MaybeMeUser.getMaybeMeUser(),to:r.id,local:!0,self:"out",t:parseInt((new Date).getTime()/1e3),isNewMsg:!0,type:"chat",body:t,caption:t,content:t,footer:i,isDynamicReplyButtonsMsg:!0,isForwarded:!1,isFromTemplate:!1,invis:!0,fromMe:!1},Object.assign(t,{dynamicReplyButtons:n}),"success"===(i=(await Promise.all(window.Store.addAndSendMsgToChat(r,t)))[1])||"OK"===i?WAPI.scope(o,!1,i,null):WAPI.scope(o,!0,i,null)):r},window.WAPI.blockContact=async function(e){return!!e&&(void 0!==(e=window.Store.Contact.get(e))&&(await Store.Block.blockContact(e),!0))},window.WAPI.unblockContact=async function(e){return!!e&&(void 0!==(e=window.Store.Contact.get(e))&&(await Store.Block.unblockContact(e),!0))},window.WAPI.getBlockList=async function(){let e=await Store.Blocklist,t=[];if(void 0===e||void 0===e._index)return!1;for(var n in e._index)t.push(n);return t},window.WAPI.getAllContacts=function(){const e=window.Store.Contact.map(e=>WAPI._serializeContactObj(e));return e.filter(e=>!0===e.isUser)},window.WAPI.getMyContacts=function(e){var t=window.Store.Contact.filter(e=>!0===e.isMyContact).map(e=>WAPI._serializeContactObj(e));return void 0!==e&&e(t),t},window.WAPI.getContact=function(e,t){e=window.Store.Contact.get(e);return void 0!==t&&t(window.WAPI._serializeContactObj(e)),window.WAPI._serializeContactObj(e)},window.WAPI.getAllChats=function(e){var t=window.Store.Chat.map(e=>WAPI._serializeChatObj(e));return void 0!==e&&e(t),t},window.WAPI.haveNewMsg=i,window.WAPI.getAllChatsWithNewMsg=a,window.WAPI.getAllChatIds=function(e){var t=window.Store.Chat.map(e=>e.id._serialized||e.id);return void 0!==e&&e(t),t},window.WAPI.getAllNewMessages=function(){return a().map(e=>WAPI.getChat(e.id)).flatMap(e=>e.msgs._models.filter(e=>e.isNewMsg)).map(WAPI._serializeMessageObj)||[]},window.WAPI.getAllUnreadMessages=async function(){var e=JSON.stringify(a().map(e=>WAPI.getChat(e.id._serialized)).map(e=>e.msgs._models.filter(e=>-1===e.ack)).flatMap(e=>e)||[]);return JSON.parse(e)},window.WAPI.getAllChatsWithMessages=async function(e){const t=[];return e?t.push(WAPI.getAllChatsWithNewMsg().map(e=>WAPI.getChat(e.id._serialized))):t.push(WAPI.getAllChatIds().map(e=>WAPI.getChat(e))),e=(await Promise.all(t)).flatMap(e=>e),e=JSON.stringify(e),JSON.parse(e)},window.WAPI.getAllGroups=function(e){var t=window.Store.Chat.filter(e=>e.isGroup);return void 0!==e&&e(t),t},window.WAPI.getChat=function(e){if(!e)return!1;e="string"==typeof e?e:e._serialized;let t=Store.Chat.get(e);return t||(e=new window.Store.UserConstructor(e,{intentionallyUsePrivateConstructor:!0}),t=Store.Chat.find(e)||!1),t&&(t.sendMessage=t.sendMessage||function(){return window.Store.sendMessage.apply(this,arguments)}),t},window.WAPI.getStatus=async function(e){return e=Store.WidFactory.createWid(e),Store.MyStatus.getStatus(e)},window.WAPI.getChatByName=function(t,e){var n=window.Store.Chat.find(e=>e.name===t);return void 0!==e&&e(n),n},window.WAPI.getNewId=function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<20;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},window.WAPI.getChatById=function(e){try{if(e){var t=WAPI.getChat(e);if(t)return WAPI._serializeChatObj(t)}throw!1}catch{return!1}},window.WAPI.getUnreadMessagesInChat=l,window.WAPI.loadEarlierMessages=async function(e){const t=WAPI.getChat(e);if(t){const n=await t.loadEarlierMsgs();if(n)return n.map(WAPI._serializeMessageObj)}return!1},window.WAPI.loadAllEarlierMessages=u,window.WAPI.asyncLoadAllEarlierMessages=function(e,t){u(e),t()},window.WAPI.areAllMessagesLoaded=function(e,t){return WAPI.getChat(e).msgs.msgLoadState.noEarlierMsgs?(t&&t(!0),!0):(t&&t(!1),!1)},window.WAPI.loadEarlierMessagesTillDate=function(e,t,n){function i(){a.msgs._models[0].t>t&&!a.msgs.msgLoadState.noEarlierMsgs?a.loadEarlierMsgs().then(i):n()}const a=WAPI.getChat(e);i()},window.WAPI.getAllGroupMetadata=function(e){var t=window.Store.GroupMetadata.default.map(e=>e.attributes);return void 0!==e&&e(t),t},window.WAPI.getGroupMetadata=async function(e,t){return e=await window.Store.WidFactory.createWid(e),e=await window.Store.GroupMetadata.default.find(e),void 0!==t&&t(e),e},window.WAPI._getGroupParticipants=o,window.WAPI.getGroupParticipantIDs=async function(e,t){return e=(await o(e)).map(e=>e.id),void 0!==t&&t(e),e},window.WAPI.getAllMessagesInChat=async function(e,t=!0,n=!0,i){var a="string"==typeof e&&await WAPI.getChat(e);if(a&&"boolean"==typeof t&&"boolean"==typeof n){let e=[];var o,r=a.msgs._models;for(const s in r)"remove"!==s&&(o=r[s],(o=WAPI.processMessageObj(o,t,n))&&e.push(o));return void 0!==i&&i(e),e}return WAPI.sendExist(e)},window.WAPI.loadAndGetAllMessagesInChat=async function(a,o,r){return WAPI.loadAllEarlierMessages(a).then(()=>{let e=[];var t,n=WAPI.getChat(a).msgs._models;for(const i in n)"remove"!==i&&(t=n[i],(t=WAPI.processMessageObj(t,o,r))&&e.push(t));return e})},window.WAPI.getUnreadMessages=c,window.WAPI.getCommonGroups=async function(t,e){let n=[];var i,a=window.WAPI.getAllGroups();for(i in a)try{let e=await window.WAPI.getGroupParticipantIDs(a[i].id);e.filter(e=>e==t).length&&n.push(a[i])}catch(e){console.log("Error in group:"),console.log(a[i]),console.log(e)}return void 0!==e&&e(n),n},window.WAPI.getProfilePicFromServer=async function(e){return await Store.ProfilePicThumb.find(e).then(e=>e.eurl)},window.WAPI.downloadFile=async function(t){return new Promise((n,e)=>{let i=new XMLHttpRequest;i.onload=function(){if(4==i.readyState)if(200==i.status){let t=new FileReader;t.readAsDataURL(i.response),t.onload=function(e){n(t.result.substr(t.result.indexOf(",")+1))}}else console.error(i.statusText);else n(!1)},i.open("GET",t,!0),i.responseType="blob",i.send(null)})},window.WAPI.downloadMedia=async function e(t){const n=await WAPI.getMessageById(t,null,!1);if(!n)throw{error:!0,code:"message_not_found",message:"Message not found"};if(!n.mediaData)throw{error:!0,code:"message_not_contains_media",message:"Message not contains media"};await n.downloadMedia(!0,1);let i=null;if(n.mediaData.mediaBlob?i=n.mediaData.mediaBlob.forceToBlob():n.mediaData.filehash&&(i=Store.BlobCache.get(n.mediaData.filehash)),!i&&n.mediaObject.type&&"VIDEO"===n.mediaObject.type)return delete n.mediaObject.type,n.type="document",e(t);if(i)return new Promise((t,e)=>{let n=new FileReader;n.onloadend=function(e){t(n.result)},n.onabort=e,n.onerror=e,n.readAsDataURL(i)});throw{error:!0,code:"media_not_found",message:"Media not found"}},window.WAPI.getNumberProfile=async function(e){if("string"!=typeof e||0===e.length)return WAPI.scope(e,!0,404,"It is necessary to number");const t=await WAPI.sendExist(e);return t&&404!=t.status&&t.id?(e=await Store.MyStatus.getStatus(t),WAPI._serializeMeObj(e)):(t.erro||(t.erro=!0),t)},window.WAPI.getMessageById=async function(e,t,n=!0){let i=window.Store.Msg.get(e);var a,o={erro:!0};if(!i){const s=window.Store.Chat.get(e.remote);if(!s)return o;await s.loadEarlierMsgs(),(i=window.Store.Msg.get(e))||((a=s.getSearchContext(e))&&a.collection&&a.collection.loadAroundPromise&&await a.collection.loadAroundPromise,i=window.Store.Msg.get(e))}if(!i)return o;let r=o;if(n)try{r=WAPI.processMessageObj(i,!0,!0)}catch(e){}else r=i;if("function"!=typeof t)return r;t(r)},window.WAPI.getNewMessageId=async function(e){if((e=await WAPI.sendExist(e)).id){const t=new Object;return t.fromMe=!0,t.id=await WAPI.getNewId().toUpperCase(),t.remote=new Store.WidFactory.createWid(e.id._serialized),t._serialized=`${t.fromMe}_${t.remote}_`+t.id,new Store.MsgKey(t)}return!1},window.WAPI.getFileHash=r,window.WAPI.generateMediaKey=s,window.WAPI.arrayBufferToBase64=function(e){for(var t,n="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=new Uint8Array(e),o=(e=a.byteLength)%3,r=e-o,s=0;s<r;s+=3)n+=i[(16515072&(t=a[s]<<16|a[s+1]<<8|a[s+2]))>>18]+i[(258048&t)>>12]+i[(4032&t)>>6]+i[63&t];return 1==o?n+=i[(252&(t=a[r]))>>2]+i[(3&t)<<4]+"==":2==o&&(n+=i[(64512&(t=a[r]<<8|a[1+r]))>>10]+i[(1008&t)>>4]+i[(15&t)<<2]+"="),n},window.WAPI.getListMute=async function(e="all"){var t,n=(await window.Store.Mute)._models,i=new Array,a=new Array;for(t in n)(n[t].__x_isMuted?a:i).push(WAPI.interfaceMute(n[t]));var o=null;switch(console.log(0,e),e){case"all":o=[{total:a.length+i.length,amountToMute:a.length,amountnoMute:i.length},a,i];break;case"toMute":o=[{total:a.length},a];break;case"noMute":o=[{total:i.length},i]}return o},window.WAPI.getHost=async function(){var e=await Store.MaybeMeUser.getMaybeMeUser(),e=await WAPI.sendExist(e._serialized),e=await Store.MyStatus.getStatus(e);return WAPI._serializeMeObj(e)},window.WAPI.getMe=function(e){var t=window.Store.Contact.get(window.Store.Conn.me);return void 0!==e&&e(t.all),t.all},window.WAPI.isConnected=function(e){var t=null==document.querySelector('[data-testid="alert-phone"]')&&null==document.querySelector('[data-testid="alert-computer"]');return void 0!==e&&e(t),t},window.WAPI.isLoggedIn=function(e){var t=window.Store.Contact&&void 0!==window.Store.Contact.checksum;return void 0!==e&&e(t),t},window.WAPI.getBatteryLevel=function(){return Store.Me&&Store.Me.battery?Store.Me.battery:void 0},window.WAPI.base64ImageToFile=d,window.WAPI.base64ToFile=d,window.WAPI.restartService=async function(){return await Store.ServiceWorker.default.restart(),!0},window.WAPI.killServiceWorker=async function(){return await Store.ServiceWorker.default.killServiceWorker(),!0},window.WAPI.sendMute=async function(t,n,i){if((t=await WAPI.sendExist(t)).erro)return t;{let e=null;var a=null,o=null,r=null,s=await WAPI.getchatId(t.id),d=await window.Store.Mute.get(t.id),c={type:"sendMute",time:n,timeType:i};if("number"==typeof n&&"string"==typeof i){switch(i){case"hours":e=parseInt(new Date((new Date).setHours((new Date).getHours()+n)).getTime()/1e3);break;case"minutes":e=parseInt(new Date((new Date).setMinutes((new Date).getMinutes()+n)).getTime()/1e3);break;case"year":e=parseInt(new Date((new Date).setDate((new Date).getDate()+n)).getTime()/1e3)}await window.Store.SendMute.sendConversationMute(t.id,e,0).then(e=>{a=e}).catch(e=>{a=e})}else o=!0,await window.Store.SendMute.sendConversationMute(t.id,0,d.__x_expiration).then(e=>{a=e}).catch(e=>{a=e});return i=200===a.status?(o?(d.__x_expiration=0,d.__x_isMuted=!1):(d.__x_expiration=e,d.__x_isMuted=!0),WAPI.scope(s,!1,a.status,null)):(r=o?"is not mute to remove":"This chat is already mute",WAPI.scope(s,!0,a.status,r)),Object.assign(i,c),i}},window.WAPI._newMessagesQueue=[],window.WAPI._newMessagesBuffer=null!=sessionStorage.getItem("saved_msgs")?JSON.parse(sessionStorage.getItem("saved_msgs")):[],window.WAPI._newMessagesDebouncer=null,window.WAPI._newMessagesCallbacks=[],window.addEventListener("unload",window.WAPI._unloadInform,!1),window.addEventListener("beforeunload",window.WAPI._unloadInform,!1),window.addEventListener("pageunload",window.WAPI._unloadInform,!1),window.WAPI.sendMessageMentioned=async function(e,t,n){Array.isArray(n)||(n=[n]);const i=WAPI.getChat(e),a=await Store.Contact.serialize().filter(e=>n.includes(e.id.user));i.sendMessage(t,{linkPreview:null,mentionedJidList:a.map(e=>e.id),quotedMsg:null,quotedMsgAdminGroupJid:null})},window.WAPI.getProfilePicSmallFromId=async function(e){return window.Store.ProfilePicThumb.find(e).then(async function(e){return void 0!==e.img&&window.WAPI.downloadFileWithCredentials(e.img)},function(e){return!1})},window.WAPI.getProfilePicFromId=async function(e){return window.Store.ProfilePicThumb.find(e).then(async function(e){return void 0!==e.imgFull&&window.WAPI.downloadFileWithCredentials(e.imgFull)},function(e){return!1})},window.WAPI.downloadFileWithCredentials=async function(e){if(!axios||!e)return!1;e=(await axios.get(e,{responseType:"arraybuffer"})).data;return btoa(new Uint8Array(e).reduce((e,t)=>e+String.fromCharCode(t),""))},window.WAPI.getChatIsOnline=async function(e){const t=Store.Chat.get(e);return!!t&&(await t.presence.subscribe(),t.presence.attributes.isOnline)},window.WAPI.getLastSeen=async function(e){const t=Store.Chat.get(e);return!!t&&(await t.presence.subscribe(),t.presence.chatstate.t||!1)},window.WAPI.getWAVersion=function(){return window.Debug.VERSION},window.WAPI.archiveChat=async function(e,t){return Store.Archive.setArchive(Store.Chat.get(e),t).then(e=>!0).catch(e=>!1)},window.WAPI.takeOver=async function(){return await Store.State.default.takeover(),!0},window.WAPI.onIncomingCall=function(e){return window.WAPI.waitForStore(["Call"],()=>{window.Store.Call.on("add",e)}),!0},window.WAPI.onInterfaceChange=function(t){return window.WAPI.waitForStore("Stream",()=>{const e=()=>({displayInfo:window.Store.Stream.displayInfo,mode:window.Store.Stream.mode,info:window.Store.Stream.info});t(e()),window.Store.Stream.on("change:info change:displayInfo change:mode",()=>{t(e())})}),!0},window.WAPI.setMessagesAdminsOnly=async function(e,t){return await Store.WapQuery.setGroupProperty(e,"announcement",t),!0},window.WAPI.logout=async function(){return!!window.Store.Login&&(await window.Store.Login.triggerCriticalSyncLogout(),!0)},window.WAPI.storePromises={},window.WAPI.waitForStore=async function(e,t){Array.isArray(e)||(e=[e]);const o=e=>void 0===window.Store[e],n=e.filter(o);e=n.map(a=>(window.WAPI.storePromises[a]||(window.WAPI.storePromises[a]=new Promise(t=>{let n=null;const i=e=>{(e&&e.detail||"")!==a&&o(a)||(window.removeEventListener("storeLoaded",i),clearInterval(n),t(!0))};window.addEventListener("storeLoaded",i),n=setInterval(i,1e3)})),window.WAPI.storePromises[a]));const i=Promise.all(e);return"function"==typeof t&&i.then(t),i};{let t=!1,n=()=>window.Store.State.Socket.stream;window.WAPI.onStreamChange=function(e){return window.WAPI.waitForStore("State",()=>{window.Store.State.Socket.on("change:stream",()=>e(n())),t||(t=!0,e(n()))}),!0}}{let t=!1;const P=()=>window.Store.State.Socket.state;window.WAPI.onStateChange=function(e){return window.WAPI.waitForStore("State",()=>{window.Store.State.Socket.on("change:state",()=>e(P())),t||(t=!0,e(P()))}),!0}}window.WAPI.waitForStore(["Chat","Msg"],()=>{window.WAPI._newMessagesListener=window.Store.Msg.on("add",e=>{e&&e.isNewMsg&&!e.isSentByMe&&((e=window.WAPI.processMessageObj(e,!1,!1))&&(window.WAPI._newMessagesQueue.push(e),window.WAPI._newMessagesBuffer.push(e)),!window.WAPI._newMessagesDebouncer&&0<window.WAPI._newMessagesQueue.length&&(window.WAPI._newMessagesDebouncer=setTimeout(()=>{let t=window.WAPI._newMessagesQueue,n=(window.WAPI._newMessagesDebouncer=null,window.WAPI._newMessagesQueue=[],[]);window.WAPI._newMessagesCallbacks.forEach(function(e){void 0!==e.callback&&e.callback(t),!0===e.rmAfterUse&&n.push(e)}),n.forEach(function(e){e=window.WAPI._newMessagesCallbacks.indexOf(e);window.WAPI._newMessagesCallbacks.splice(e,1)})},1e3)))})}),window.WAPI._unloadInform=e=>{window.WAPI._newMessagesBuffer.forEach(t=>{Object.keys(t).forEach(e=>void 0===t[e]?delete t[e]:"")}),sessionStorage.setItem("saved_msgs",JSON.stringify(window.WAPI._newMessagesBuffer)),window.WAPI._newMessagesCallbacks.forEach(function(e){void 0!==e.callback&&e.callback({status:-1,message:"page will be reloaded, wait and register callback again."})})},window.WAPI.waitNewMessages=h,window.WAPI.allNewMessagesListener=n=>window.WAPI.waitForStore(["Chat","Msg"],()=>{window.Store.Msg.on("add",t=>{t&&t.isNewMsg&&setTimeout(function(){var e=window.WAPI.processMessageObj(t,!0,!1);e&&n(e)},3e3)})}),window.WAPI.waitNewAcknowledgements=function(t){return window.WAPI.waitForStore(["Chat","Msg"],()=>{Store.Msg.on("change:ack",e=>{t(e)})}),!0},window.WAPI.onAddedToGroup=function(t){return window.WAPI.waitForStore(["Chat","Msg"],()=>{Store.Chat.on("add",e=>{e&&e.isGroup&&t(e)})}),!0},window.WAPI.onLiveLocation=async function(t,l){return window.WAPI.waitForStore(["LiveLocation"],()=>{var e=Store.LiveLocation.get(t);return!!e&&(e.participants.validLocations().map(e=>e.on("change:lastUpdated",(e,t,n)=>{console.log(e,t,n);const{id:i,lat:a,lng:o,accuracy:r,degrees:s,speed:d,lastUpdated:c}=e;t={id:i.toString(),lat:a,lng:o,accuracy:r,degrees:s,speed:d,lastUpdated:c};l(t)})),!0)})},window.WAPI.onParticipantsChanged=async function(c,l){return window.WAPI.waitForStore(["Chat","Msg"],()=>{const r=["invite","add","remove","leave","promote","demote"],s=window.Store.Chat.get(c),t=window.Store.GroupMetadata.default.get(c);A[c]||(A[c]={},t.participants.forEach(e=>{A[c][e.id.toString()]={subtype:"add",from:t.owner}}));let d=0;return s.on("change:groupMetadata.participants",e=>s.on("all",(e,t)=>{var{isGroup:t,previewMessage:n}=t;if(t&&"change"===e&&n&&"gp2"===n.type&&r.includes(n.subtype)){const{subtype:i,from:a,recipients:o}=n;t=o[0].toString();A[c][t]&&A[c][o[0]].subtype==i||(0==d?d++:(A[c][t]={subtype:i,from:a},l({by:a.toString(),action:i,who:o}),s.off("all",this),d=0))}})),!0})}}}();
